!function(){var e={117:function(e,t,o){"use strict";e.exports=o.p+"images/avatar.jpg"},121:function(e,t,o){"use strict";e.exports=o.p+"images/editavatar.png"},569:function(e,t,o){"use strict";e.exports=o.p+"images/plus.svg"},576:function(e,t,o){"use strict";e.exports=o.p+"images/logo.svg"},817:function(e,t,o){var a='```html <!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"/> <meta name="viewport" content="width=device-width,initial-scale=1"/> <meta name="author" content="P.R.Neider-Ball"/> <meta name="description" content="Spots"/> <meta name="keywords" content="Photo sharing, Portrait photographers"/> <title>Spots</title> </head> <body class="page"> <header class="header"> <img src="'+o(576)+'" alt="Spots Logo" class="header__logo"/> </header> <main class="content"> <section class="profile page__section"> <div class="profile__picture-container"> <img src="'+o(117)+'" alt="Bessie Coleman" class="profile__avatar"/> <button class="profile__picture-btn"> <img class="profile__edit-icon" src="'+o(121)+'" alt="Edit icon"/> </button> </div> <div class="profile__column"> <h1 class="profile__name">Bessie Coleman</h1> <p class="profile__description">Civil Aviator</p> <button type="button" class="profile__edit-btn button"> <img src="'+o(956)+'" alt="Edit icon"/>Edit Profile </button> </div> <button type="button" class="profile__add-btn button"> <img src="'+o(569)+'" alt="Plus icon"/> New Post </button> </section> <div class="cards page__section"> <ul class="cards__list"> </ul> </div> </main> <footer class="footer page__section"> <h2 class="footer__content">2025 Â© Spots</h2> </footer> <template id="card-template"> <li class="card"> <div class="card__image-container"> <img alt="Image related to the card content" class="card__image"/> <button type="button" class="card__delete-btn button"></button> </div> <div class="card__content"> <h2 class="card__title"></h2> <button type="button" class="card__like-btn button"></button> </div> </li> </template> <div class="modal modal--edit-profile" id="edit-profile-modal"> <div class="modal__container"> <button type="button" class="modal__close-btn"></button> <h2 class="modal__title">Edit Profile</h2> <form id="edit-profile" name="edit-profile" class="modal__form"> <label for="name" class="modal__label"> Name <input id="name" type="text" class="modal__input" placeholder="Type your name" minlength="2" maxlength="40" required/> <span id="name-error" class="modal__error"></span> </label> <label for="description" class="modal__label"> Description <input id="description" type="text" class="modal__input" placeholder="Describe yourself" minlength="2" maxlength="200" required/> <span id="description-error" class="modal__error"></span> </label> <button type="submit" class="modal__submit-btn button">Save</button> </form> </div> </div> <div class="modal modal--new-post" id="new-post-modal"> <div class="modal__container"> <button type="button" class="modal__close-btn button"></button> <h2 class="modal__title">New Post</h2> <form id="new-post" name="new-post" class="modal__form"> <label for="image_url" class="modal__label"> Image link <input id="image_url" type="url" class="modal__input" placeholder="Paste a link to the picture" required/> <span id="image_url-error" class="modal__error"></span> </label> <label for="new-post-caption-input" class="modal__label"> Caption <input id="new-post-caption-input" type="text" class="modal__input" placeholder="Type your caption" minlength="2" maxlength="30" required/> <span id="new-post-caption-input-error" class="modal__error"></span> </label> <button type="submit" class="modal__submit-btn button modal__submit-btn--disabled" disabled="disabled"> Save </button> </form> </div> </div> <div class="modal" id="preview-modal"> <div class="modal__content modal__content--preview"> <button type="button" class="modal__close-preview"></button> <figure class="modal__figure"> <img src="#" alt="Preview of the selected image" class="modal__image"/> <figcaption class="modal__caption"></figcaption> </figure> </div> </div> <div class="modal" id="delete-modal"> <div class="modal__container modal__container_delete"> <button type="button" class="modal__close-btn del__close-btn"></button> <h3 class="modal__title modal__title_delete">Are you sure you want to delete this image?</h3> <form id="delete-form" class="modal__form delete__form" novalidate> <div class="delete-buttons-container"> <button type="submit" class="modal__submit-btn modal__submit-btn_delete">Delete</button> <button type="button" class="modal__submit-btn modal__submit-btn_cancel">Cancel</button> </div> </form> </div> </div> <div class="modal modal--edit-avatar" id="edit-avatar-modal"> <div class="modal__container"> <button type="button" class="modal__close-btn button"></button> <h2 class="modal__title">Edit profile avatar</h2> <form id="edit-avatar" name="edit-avatar" class="modal__form"> <label for="avatar_url" class="modal__label"> Profile Picture <input id="avatar_url" type="url" class="modal__input" placeholder="Paste the link to an image" required/> <span id="avatar_url-error" class="modal__error"></span> </label> <button type="submit" class="modal__submit-btn button modal__submit-btn--disabled" disabled="disabled"> Save </button> </form> </div> </div> </body> </html> ``` ';e.exports=a},956:function(e,t,o){"use strict";e.exports=o.p+"images/pencil-icon.svg"}},t={};function o(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,o),n.exports}o.p="/",function(){"use strict";o(817);const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn--disabled",inputErrorClass:"modal__input--error",errorClass:"modal__error--active"},t=(e,t)=>{const o=document.querySelector(`#${e.id}-error`);o&&(e.classList.remove(t.inputErrorClass),o.textContent="",o.classList.remove(t.errorClass))},a=(e,o)=>{const a=Array.from(e.querySelectorAll(o.inputSelector)),n=e.querySelector(o.submitButtonSelector);a.forEach((e=>{t(e,o)})),r(a,n,o)},r=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?(t.classList.add(o.inactiveButtonClass),t.setAttribute("disabled",!0)):(t.classList.remove(o.inactiveButtonClass),t.removeAttribute("disabled"))};var n=o(576),s=o(117),l=o(956),i=o(569);function d(e,t,o="Save",a="Saving..."){t.textContent=e?a:o}function c(e,t,o="Saving..."){t.preventDefault();const a=t.submitter,r=a.textContent;return d(!0,a,r,o),e().then((()=>{t.target.reset()})).catch(console.error).finally((()=>{d(!1,a,r)}))}const u=document.querySelector(".cards__list"),m=document.querySelector("#card-template"),_=document.querySelector("#preview-modal"),p=_?.querySelector(".modal__image"),b=_?.querySelector(".modal__caption"),v=document.querySelector(".profile__name"),h=document.querySelector(".profile__description"),f=document.querySelector("#edit-profile-modal"),g=document.querySelector("#new-post-modal"),y=document.querySelector(".profile__avatar"),S=document.querySelector(".profile__picture-btn"),q=document.querySelector(".profile__add-btn"),E=document.querySelectorAll(".modal__close-btn, .modal__close-preview"),C=document.querySelector("#delete-modal"),k=C.querySelector(".modal__submit-btn_delete"),L=C.querySelector(".modal__submit-btn_cancel"),x=document.querySelector("#edit-avatar-modal"),w=x.querySelector("#avatar_url"),P=x.querySelector(".modal__submit-btn"),A=document.querySelector(".profile__edit-btn"),D=document.forms["edit-profile"],U=document.forms["edit-avatar"],I=document.forms["new-post"],T=I.querySelector("#new-post-caption-input"),N=I.querySelector("#image_url"),B=document.querySelector(".header__logo"),$=document.querySelector(".profile__edit-btn img"),O=document.querySelector(".profile__add-btn img");let j,J,R;B&&(B.src=n),$&&($.src=l),O&&(O.src=i);const H=new class{constructor({baseUrl:e,headers:t}){this._baseUrl=e,this._headers=t}_checkResponse(e){return e.ok?e.json():Promise.reject(new Error(`Error: ${e.status}`))}_request(e,t={}){return fetch(`${this._baseUrl}${e}`,t).then(this._checkResponse).catch(this.handleError)}getUserInfo(){return this._request("/users/me",{headers:this._headers})}getInitialCards(){return this._request("/cards",{headers:this._headers})}editProfileAvatar({avatar:e}){return this._request("/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}editUserInfo({name:e,about:t}){return this._request("/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})})}addNewCard({name:e,link:t}){return this._request("/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})})}deleteCard(e){return this._request(`/cards/${e}`,{method:"DELETE",headers:this._headers})}toggleLike(e,t){return this._request(`/cards/${e}/likes`,{method:t?"PUT":"DELETE",headers:this._headers})}getUserAndCards(){return Promise.all([this.getUserInfo(),this.getInitialCards()]).then((([e,t])=>({userData:e,cards:t})))}handleError(e){throw console.error("API Error: ",e),e}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"46c1a639-4215-418c-8205-87dec37d68b7","Content-Type":"application/json"}});function M(e){const t=m.content.querySelector("li").cloneNode(!0),o=t.querySelector(".card__image"),a=t.querySelector(".card__title"),r=t.querySelector(".card__like-btn"),n=t.querySelector(".card__delete-btn");return o.src=e.link,o.alt=e.name,a.textContent=e.name,e.isLiked&&r.classList.add("card__like-btn--liked"),r.addEventListener("click",(()=>{const t=r.classList.contains("card__like-btn--liked");H.toggleLike(e._id,!t).then((e=>{r.classList.toggle("card__like-btn--liked",e.isLiked)})).catch((e=>console.error("Error toggling like:",e)))})),o.addEventListener("click",(()=>{return t=e.link,o=e.name,void(_&&p&&b&&(p.src=t,p.alt=o,b.textContent=o,F(_)));var t,o})),n.addEventListener("click",(o=>{o.stopPropagation(),j=t,J=e._id,F(C)})),t}function z(e){e.preventDefault();const t=w.value.trim();if(t){const o=P.textContent;function a(){return H.editProfileAvatar({avatar:t}).then((e=>{y.src=e.avatar||s,Y(x)}))}P.textContent="Saving...",c(a,e).finally((()=>{P.textContent=o}))}}function F(e){e.classList.add("modal--opened"),document.addEventListener("keydown",G),e.addEventListener("click",K)}function Y(e){e.classList.remove("modal--opened"),document.removeEventListener("keydown",G),e.removeEventListener("click",K)}function G(e){if("Escape"===e.key){const e=document.querySelector(".modal--opened");e&&Y(e)}}function K(e){e.target.classList.contains("modal")&&Y(e.target)}function Q(e){c((function(){return H.editUserInfo({name:D.name.value,about:D.description.value}).then((e=>{v.textContent=e.name,h.textContent=e.about,Y(f)}))}),e)}function V(e){e.preventDefault();const t=T.value.trim(),o=N.value.trim();c((function(){return H.addNewCard({name:t,link:o}).then((e=>{const t=M(e);u.prepend(t),Y(g)}))}),e)}var W;H.getUserInfo().then((e=>{R=e._id,v.textContent=e.name,h.textContent=e.about,y.src=e.avatar||s})).catch((e=>console.error("Error fetching user info:",e))),H.getInitialCards().then((e=>{e.forEach((e=>{const t=M(e);u.appendChild(t)}))})).catch((e=>console.error("Error loading cards:",e))),k.addEventListener("click",(e=>{if(e.preventDefault(),J){const e=k.textContent;k.textContent="Deleting...",H.deleteCard(J).then((()=>{j.remove(),j=null,J=null,Y(C)})).catch((e=>console.error("Error deleting card:",e))).finally((()=>{k.textContent=e}))}})),L.addEventListener("click",(()=>{Y(C),j=null,J=null})),S.addEventListener("click",(()=>{F(x),a(U,e)})),document.addEventListener("DOMContentLoaded",(()=>{q.addEventListener("click",(()=>{const t=document.forms["new-post"];F(g),a(t,e),t.querySelector("#new-post-caption-input"),t.querySelector("#image_url")})),A.addEventListener("click",(()=>{D.name.value=v.textContent,D.description.value=h.textContent,F(f),a(D,e)})),D.addEventListener("submit",Q),document.forms["new-post"].addEventListener("submit",V),U.addEventListener("submit",z),E.forEach((e=>e.addEventListener("click",(()=>Y(e.closest(".modal"))))))})),W=e,document.querySelectorAll(W.formSelector).forEach((e=>{((e,o)=>{const a=Array.from(e.querySelectorAll(o.inputSelector)),n=e.querySelector(o.submitButtonSelector);a.forEach((e=>{e.addEventListener("input",(()=>{((e,o,a)=>{o.validity.valid?t(o,a):((e,t,o)=>{const a=document.querySelector(`#${e.id}-error`);a&&(e.classList.add(o.inputErrorClass),a.textContent=t,a.classList.add(o.errorClass))})(o,o.validationMessage,a)})(0,e,o),r(a,n,o)}))})),r(a,n,o)})(e,W)}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SixpQkFDbENLLEVBQWFNLFlBQWNvSyxFQUMzQjFLLEVBQWFJLFVBQVVrQixJQUFJdkIsRUFBT0gsWUFBVyxFQWMzQzZLLENBQWUzSyxFQUFjQSxFQUFhNkssa0JBQW1CNUssRUFHL0QsRUFnQ0l5SyxDQUFtQmhLLEVBQWFWLEVBQWNDLEdBQzlDZ0IsRUFBa0JOLEVBQVdJLEVBQWNkLEVBQU8sR0FDbEQsSUFHSmdCLEVBQWtCTixFQUFXSSxFQUFjZCxFQUFPLEVBTWhEd0ssQ0FBa0IvSixFQUFhVCxFQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL2luZGV4Lmh0bWwiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3V0aWxzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3V0aWxzL2Zvcm1oYW5kbGVyLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xudmFyIF9fX0hUTUxfTE9BREVSX0lNUE9SVF8wX19fID0gcmVxdWlyZShcIi4vaW1hZ2VzL2xvZ28uc3ZnXCIpO1xudmFyIF9fX0hUTUxfTE9BREVSX0lNUE9SVF8xX19fID0gcmVxdWlyZShcIi4vaW1hZ2VzL2F2YXRhci5qcGdcIik7XG52YXIgX19fSFRNTF9MT0FERVJfSU1QT1JUXzJfX18gPSByZXF1aXJlKFwiLi9pbWFnZXMvZWRpdGF2YXRhci5wbmdcIik7XG52YXIgX19fSFRNTF9MT0FERVJfSU1QT1JUXzNfX18gPSByZXF1aXJlKFwiLi9pbWFnZXMvcGVuY2lsLWljb24uc3ZnXCIpO1xudmFyIF9fX0hUTUxfTE9BREVSX0lNUE9SVF80X19fID0gcmVxdWlyZShcIi4vaW1hZ2VzL3BsdXMuc3ZnXCIpO1xuLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiYGBgaHRtbCA8IURPQ1RZUEUgaHRtbD4gPGh0bWwgbGFuZz1cXFwiZW5cXFwiPiA8aGVhZD4gPG1ldGEgY2hhcnNldD1cXFwiVVRGLThcXFwiLz4gPG1ldGEgbmFtZT1cXFwidmlld3BvcnRcXFwiIGNvbnRlbnQ9XFxcIndpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTFcXFwiLz4gPG1ldGEgbmFtZT1cXFwiYXV0aG9yXFxcIiBjb250ZW50PVxcXCJQLlIuTmVpZGVyLUJhbGxcXFwiLz4gPG1ldGEgbmFtZT1cXFwiZGVzY3JpcHRpb25cXFwiIGNvbnRlbnQ9XFxcIlNwb3RzXFxcIi8+IDxtZXRhIG5hbWU9XFxcImtleXdvcmRzXFxcIiBjb250ZW50PVxcXCJQaG90byBzaGFyaW5nLCBQb3J0cmFpdCBwaG90b2dyYXBoZXJzXFxcIi8+IDx0aXRsZT5TcG90czwvdGl0bGU+IDwvaGVhZD4gPGJvZHkgY2xhc3M9XFxcInBhZ2VcXFwiPiA8aGVhZGVyIGNsYXNzPVxcXCJoZWFkZXJcXFwiPiA8aW1nIHNyYz1cXFwiXCIgKyBfX19IVE1MX0xPQURFUl9JTVBPUlRfMF9fXyArIFwiXFxcIiBhbHQ9XFxcIlNwb3RzIExvZ29cXFwiIGNsYXNzPVxcXCJoZWFkZXJfX2xvZ29cXFwiLz4gPC9oZWFkZXI+IDxtYWluIGNsYXNzPVxcXCJjb250ZW50XFxcIj4gPHNlY3Rpb24gY2xhc3M9XFxcInByb2ZpbGUgcGFnZV9fc2VjdGlvblxcXCI+IDxkaXYgY2xhc3M9XFxcInByb2ZpbGVfX3BpY3R1cmUtY29udGFpbmVyXFxcIj4gPGltZyBzcmM9XFxcIlwiICsgX19fSFRNTF9MT0FERVJfSU1QT1JUXzFfX18gKyBcIlxcXCIgYWx0PVxcXCJCZXNzaWUgQ29sZW1hblxcXCIgY2xhc3M9XFxcInByb2ZpbGVfX2F2YXRhclxcXCIvPiA8YnV0dG9uIGNsYXNzPVxcXCJwcm9maWxlX19waWN0dXJlLWJ0blxcXCI+IDxpbWcgY2xhc3M9XFxcInByb2ZpbGVfX2VkaXQtaWNvblxcXCIgc3JjPVxcXCJcIiArIF9fX0hUTUxfTE9BREVSX0lNUE9SVF8yX19fICsgXCJcXFwiIGFsdD1cXFwiRWRpdCBpY29uXFxcIi8+IDwvYnV0dG9uPiA8L2Rpdj4gPGRpdiBjbGFzcz1cXFwicHJvZmlsZV9fY29sdW1uXFxcIj4gPGgxIGNsYXNzPVxcXCJwcm9maWxlX19uYW1lXFxcIj5CZXNzaWUgQ29sZW1hbjwvaDE+IDxwIGNsYXNzPVxcXCJwcm9maWxlX19kZXNjcmlwdGlvblxcXCI+Q2l2aWwgQXZpYXRvcjwvcD4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJwcm9maWxlX19lZGl0LWJ0biBidXR0b25cXFwiPiA8aW1nIHNyYz1cXFwiXCIgKyBfX19IVE1MX0xPQURFUl9JTVBPUlRfM19fXyArIFwiXFxcIiBhbHQ9XFxcIkVkaXQgaWNvblxcXCIvPkVkaXQgUHJvZmlsZSA8L2J1dHRvbj4gPC9kaXY+IDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwicHJvZmlsZV9fYWRkLWJ0biBidXR0b25cXFwiPiA8aW1nIHNyYz1cXFwiXCIgKyBfX19IVE1MX0xPQURFUl9JTVBPUlRfNF9fXyArIFwiXFxcIiBhbHQ9XFxcIlBsdXMgaWNvblxcXCIvPiBOZXcgUG9zdCA8L2J1dHRvbj4gPC9zZWN0aW9uPiA8ZGl2IGNsYXNzPVxcXCJjYXJkcyBwYWdlX19zZWN0aW9uXFxcIj4gPHVsIGNsYXNzPVxcXCJjYXJkc19fbGlzdFxcXCI+IDwvdWw+IDwvZGl2PiA8L21haW4+IDxmb290ZXIgY2xhc3M9XFxcImZvb3RlciBwYWdlX19zZWN0aW9uXFxcIj4gPGgyIGNsYXNzPVxcXCJmb290ZXJfX2NvbnRlbnRcXFwiPjIwMjUgwqkgU3BvdHM8L2gyPiA8L2Zvb3Rlcj4gPHRlbXBsYXRlIGlkPVxcXCJjYXJkLXRlbXBsYXRlXFxcIj4gPGxpIGNsYXNzPVxcXCJjYXJkXFxcIj4gPGRpdiBjbGFzcz1cXFwiY2FyZF9faW1hZ2UtY29udGFpbmVyXFxcIj4gPGltZyBhbHQ9XFxcIkltYWdlIHJlbGF0ZWQgdG8gdGhlIGNhcmQgY29udGVudFxcXCIgY2xhc3M9XFxcImNhcmRfX2ltYWdlXFxcIi8+IDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiY2FyZF9fZGVsZXRlLWJ0biBidXR0b25cXFwiPjwvYnV0dG9uPiA8L2Rpdj4gPGRpdiBjbGFzcz1cXFwiY2FyZF9fY29udGVudFxcXCI+IDxoMiBjbGFzcz1cXFwiY2FyZF9fdGl0bGVcXFwiPjwvaDI+IDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiY2FyZF9fbGlrZS1idG4gYnV0dG9uXFxcIj48L2J1dHRvbj4gPC9kaXY+IDwvbGk+IDwvdGVtcGxhdGU+IDxkaXYgY2xhc3M9XFxcIm1vZGFsIG1vZGFsLS1lZGl0LXByb2ZpbGVcXFwiIGlkPVxcXCJlZGl0LXByb2ZpbGUtbW9kYWxcXFwiPiA8ZGl2IGNsYXNzPVxcXCJtb2RhbF9fY29udGFpbmVyXFxcIj4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJtb2RhbF9fY2xvc2UtYnRuXFxcIj48L2J1dHRvbj4gPGgyIGNsYXNzPVxcXCJtb2RhbF9fdGl0bGVcXFwiPkVkaXQgUHJvZmlsZTwvaDI+IDxmb3JtIGlkPVxcXCJlZGl0LXByb2ZpbGVcXFwiIG5hbWU9XFxcImVkaXQtcHJvZmlsZVxcXCIgY2xhc3M9XFxcIm1vZGFsX19mb3JtXFxcIj4gPGxhYmVsIGZvcj1cXFwibmFtZVxcXCIgY2xhc3M9XFxcIm1vZGFsX19sYWJlbFxcXCI+IE5hbWUgPGlucHV0IGlkPVxcXCJuYW1lXFxcIiB0eXBlPVxcXCJ0ZXh0XFxcIiBjbGFzcz1cXFwibW9kYWxfX2lucHV0XFxcIiBwbGFjZWhvbGRlcj1cXFwiVHlwZSB5b3VyIG5hbWVcXFwiIG1pbmxlbmd0aD1cXFwiMlxcXCIgbWF4bGVuZ3RoPVxcXCI0MFxcXCIgcmVxdWlyZWQvPiA8c3BhbiBpZD1cXFwibmFtZS1lcnJvclxcXCIgY2xhc3M9XFxcIm1vZGFsX19lcnJvclxcXCI+PC9zcGFuPiA8L2xhYmVsPiA8bGFiZWwgZm9yPVxcXCJkZXNjcmlwdGlvblxcXCIgY2xhc3M9XFxcIm1vZGFsX19sYWJlbFxcXCI+IERlc2NyaXB0aW9uIDxpbnB1dCBpZD1cXFwiZGVzY3JpcHRpb25cXFwiIHR5cGU9XFxcInRleHRcXFwiIGNsYXNzPVxcXCJtb2RhbF9faW5wdXRcXFwiIHBsYWNlaG9sZGVyPVxcXCJEZXNjcmliZSB5b3Vyc2VsZlxcXCIgbWlubGVuZ3RoPVxcXCIyXFxcIiBtYXhsZW5ndGg9XFxcIjIwMFxcXCIgcmVxdWlyZWQvPiA8c3BhbiBpZD1cXFwiZGVzY3JpcHRpb24tZXJyb3JcXFwiIGNsYXNzPVxcXCJtb2RhbF9fZXJyb3JcXFwiPjwvc3Bhbj4gPC9sYWJlbD4gPGJ1dHRvbiB0eXBlPVxcXCJzdWJtaXRcXFwiIGNsYXNzPVxcXCJtb2RhbF9fc3VibWl0LWJ0biBidXR0b25cXFwiPlNhdmU8L2J1dHRvbj4gPC9mb3JtPiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9XFxcIm1vZGFsIG1vZGFsLS1uZXctcG9zdFxcXCIgaWQ9XFxcIm5ldy1wb3N0LW1vZGFsXFxcIj4gPGRpdiBjbGFzcz1cXFwibW9kYWxfX2NvbnRhaW5lclxcXCI+IDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwibW9kYWxfX2Nsb3NlLWJ0biBidXR0b25cXFwiPjwvYnV0dG9uPiA8aDIgY2xhc3M9XFxcIm1vZGFsX190aXRsZVxcXCI+TmV3IFBvc3Q8L2gyPiA8Zm9ybSBpZD1cXFwibmV3LXBvc3RcXFwiIG5hbWU9XFxcIm5ldy1wb3N0XFxcIiBjbGFzcz1cXFwibW9kYWxfX2Zvcm1cXFwiPiA8bGFiZWwgZm9yPVxcXCJpbWFnZV91cmxcXFwiIGNsYXNzPVxcXCJtb2RhbF9fbGFiZWxcXFwiPiBJbWFnZSBsaW5rIDxpbnB1dCBpZD1cXFwiaW1hZ2VfdXJsXFxcIiB0eXBlPVxcXCJ1cmxcXFwiIGNsYXNzPVxcXCJtb2RhbF9faW5wdXRcXFwiIHBsYWNlaG9sZGVyPVxcXCJQYXN0ZSBhIGxpbmsgdG8gdGhlIHBpY3R1cmVcXFwiIHJlcXVpcmVkLz4gPHNwYW4gaWQ9XFxcImltYWdlX3VybC1lcnJvclxcXCIgY2xhc3M9XFxcIm1vZGFsX19lcnJvclxcXCI+PC9zcGFuPiA8L2xhYmVsPiA8bGFiZWwgZm9yPVxcXCJuZXctcG9zdC1jYXB0aW9uLWlucHV0XFxcIiBjbGFzcz1cXFwibW9kYWxfX2xhYmVsXFxcIj4gQ2FwdGlvbiA8aW5wdXQgaWQ9XFxcIm5ldy1wb3N0LWNhcHRpb24taW5wdXRcXFwiIHR5cGU9XFxcInRleHRcXFwiIGNsYXNzPVxcXCJtb2RhbF9faW5wdXRcXFwiIHBsYWNlaG9sZGVyPVxcXCJUeXBlIHlvdXIgY2FwdGlvblxcXCIgbWlubGVuZ3RoPVxcXCIyXFxcIiBtYXhsZW5ndGg9XFxcIjMwXFxcIiByZXF1aXJlZC8+IDxzcGFuIGlkPVxcXCJuZXctcG9zdC1jYXB0aW9uLWlucHV0LWVycm9yXFxcIiBjbGFzcz1cXFwibW9kYWxfX2Vycm9yXFxcIj48L3NwYW4+IDwvbGFiZWw+IDxidXR0b24gdHlwZT1cXFwic3VibWl0XFxcIiBjbGFzcz1cXFwibW9kYWxfX3N1Ym1pdC1idG4gYnV0dG9uIG1vZGFsX19zdWJtaXQtYnRuLS1kaXNhYmxlZFxcXCIgZGlzYWJsZWQ9XFxcImRpc2FibGVkXFxcIj4gU2F2ZSA8L2J1dHRvbj4gPC9mb3JtPiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9XFxcIm1vZGFsXFxcIiBpZD1cXFwicHJldmlldy1tb2RhbFxcXCI+IDxkaXYgY2xhc3M9XFxcIm1vZGFsX19jb250ZW50IG1vZGFsX19jb250ZW50LS1wcmV2aWV3XFxcIj4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJtb2RhbF9fY2xvc2UtcHJldmlld1xcXCI+PC9idXR0b24+IDxmaWd1cmUgY2xhc3M9XFxcIm1vZGFsX19maWd1cmVcXFwiPiA8aW1nIHNyYz1cXFwiI1xcXCIgYWx0PVxcXCJQcmV2aWV3IG9mIHRoZSBzZWxlY3RlZCBpbWFnZVxcXCIgY2xhc3M9XFxcIm1vZGFsX19pbWFnZVxcXCIvPiA8ZmlnY2FwdGlvbiBjbGFzcz1cXFwibW9kYWxfX2NhcHRpb25cXFwiPjwvZmlnY2FwdGlvbj4gPC9maWd1cmU+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz1cXFwibW9kYWxcXFwiIGlkPVxcXCJkZWxldGUtbW9kYWxcXFwiPiA8ZGl2IGNsYXNzPVxcXCJtb2RhbF9fY29udGFpbmVyIG1vZGFsX19jb250YWluZXJfZGVsZXRlXFxcIj4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJtb2RhbF9fY2xvc2UtYnRuIGRlbF9fY2xvc2UtYnRuXFxcIj48L2J1dHRvbj4gPGgzIGNsYXNzPVxcXCJtb2RhbF9fdGl0bGUgbW9kYWxfX3RpdGxlX2RlbGV0ZVxcXCI+QXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGltYWdlPzwvaDM+IDxmb3JtIGlkPVxcXCJkZWxldGUtZm9ybVxcXCIgY2xhc3M9XFxcIm1vZGFsX19mb3JtIGRlbGV0ZV9fZm9ybVxcXCIgbm92YWxpZGF0ZT4gPGRpdiBjbGFzcz1cXFwiZGVsZXRlLWJ1dHRvbnMtY29udGFpbmVyXFxcIj4gPGJ1dHRvbiB0eXBlPVxcXCJzdWJtaXRcXFwiIGNsYXNzPVxcXCJtb2RhbF9fc3VibWl0LWJ0biBtb2RhbF9fc3VibWl0LWJ0bl9kZWxldGVcXFwiPkRlbGV0ZTwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcIm1vZGFsX19zdWJtaXQtYnRuIG1vZGFsX19zdWJtaXQtYnRuX2NhbmNlbFxcXCI+Q2FuY2VsPC9idXR0b24+IDwvZGl2PiA8L2Zvcm0+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz1cXFwibW9kYWwgbW9kYWwtLWVkaXQtYXZhdGFyXFxcIiBpZD1cXFwiZWRpdC1hdmF0YXItbW9kYWxcXFwiPiA8ZGl2IGNsYXNzPVxcXCJtb2RhbF9fY29udGFpbmVyXFxcIj4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJtb2RhbF9fY2xvc2UtYnRuIGJ1dHRvblxcXCI+PC9idXR0b24+IDxoMiBjbGFzcz1cXFwibW9kYWxfX3RpdGxlXFxcIj5FZGl0IHByb2ZpbGUgYXZhdGFyPC9oMj4gPGZvcm0gaWQ9XFxcImVkaXQtYXZhdGFyXFxcIiBuYW1lPVxcXCJlZGl0LWF2YXRhclxcXCIgY2xhc3M9XFxcIm1vZGFsX19mb3JtXFxcIj4gPGxhYmVsIGZvcj1cXFwiYXZhdGFyX3VybFxcXCIgY2xhc3M9XFxcIm1vZGFsX19sYWJlbFxcXCI+IFByb2ZpbGUgUGljdHVyZSA8aW5wdXQgaWQ9XFxcImF2YXRhcl91cmxcXFwiIHR5cGU9XFxcInVybFxcXCIgY2xhc3M9XFxcIm1vZGFsX19pbnB1dFxcXCIgcGxhY2Vob2xkZXI9XFxcIlBhc3RlIHRoZSBsaW5rIHRvIGFuIGltYWdlXFxcIiByZXF1aXJlZC8+IDxzcGFuIGlkPVxcXCJhdmF0YXJfdXJsLWVycm9yXFxcIiBjbGFzcz1cXFwibW9kYWxfX2Vycm9yXFxcIj48L3NwYW4+IDwvbGFiZWw+IDxidXR0b24gdHlwZT1cXFwic3VibWl0XFxcIiBjbGFzcz1cXFwibW9kYWxfX3N1Ym1pdC1idG4gYnV0dG9uIG1vZGFsX19zdWJtaXQtYnRuLS1kaXNhYmxlZFxcXCIgZGlzYWJsZWQ9XFxcImRpc2FibGVkXFxcIj4gU2F2ZSA8L2J1dHRvbj4gPC9mb3JtPiA8L2Rpdj4gPC9kaXY+IDwvYm9keT4gPC9odG1sPiBgYGAgXCI7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGNvZGU7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiOyIsImV4cG9ydCBjb25zdCBTZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnRuXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bi0tZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LS1lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yLS1hY3RpdmVcIixcclxufTtcclxuXHJcbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBjb25maWcpID0+IHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgaWYgKCFlcnJvckVsZW1lbnQpIHJldHVybjtcclxuXHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5lcnJvckNsYXNzKTtcclxufTtcclxuXHJcbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gIGlmICghZXJyb3JFbGVtZW50KSByZXR1cm47XHJcblxyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmVycm9yQ2xhc3MpO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICBzaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSwgY29uZmlnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBjb25maWcpO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBjb25maWcpO1xyXG4gIH0pO1xyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIHN1Ym1pdEJ1dHRvbiwgY29uZmlnKTtcclxufTtcclxuXHJcbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IGlucHV0TGlzdC5zb21lKChpbnB1dCkgPT4gIWlucHV0LnZhbGlkaXR5LnZhbGlkKTtcclxuXHJcbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xyXG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIHN1Ym1pdEJ1dHRvbiwgY29uZmlnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIHN1Ym1pdEJ1dHRvbiwgY29uZmlnKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKTtcclxuICBmb3Jtcy5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCB2YWxpZGF0ZUZvcm0gPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGxldCBpc1ZhbGlkID0gdHJ1ZTtcclxuXHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICBpc1ZhbGlkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIHN1Ym1pdEJ1dHRvbiwgY29uZmlnKTtcclxuICBcclxuICByZXR1cm4gaXNWYWxpZDtcclxufTtcclxuIiwiY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCkpO1xyXG4gIH1cclxuXHJcbiAgX3JlcXVlc3QoZW5kcG9pbnQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9JHtlbmRwb2ludH1gLCBvcHRpb25zKVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFwiL3VzZXJzL21lXCIsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi9jYXJkc1wiLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZWRpdFByb2ZpbGVBdmF0YXIoeyBhdmF0YXIgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXCIvdXNlcnMvbWUvYXZhdGFyXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVkaXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFwiL3VzZXJzL21lXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWJvdXQgfSlcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXCIvY2FyZHNcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSlcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlTGlrZShjYXJkSWQsIGlzTGlrZWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIlBVVFwiIDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VyQW5kQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pXHJcbiAgICAgIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4gKHsgdXNlckRhdGEsIGNhcmRzIH0pKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUVycm9yKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkFQSSBFcnJvcjogXCIsIGVycik7XHJcbiAgICB0aHJvdyBlcnI7ICBcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwaTtcclxuIiwiZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBidXR0b24sIGJ1dHRvblRleHQgPSAnU2F2ZScsIGxvYWRpbmdUZXh0ID0gJ1NhdmluZy4uLicpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBleHBvcnQgZnVuY3Rpb24gaGFuZGxlU3VibWl0KHJlcXVlc3QsIGV2dCwgbG9hZGluZ1RleHQgPSAnU2F2aW5nLi4uJykge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgXHJcbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBldnQuc3VibWl0dGVyO1xyXG4gICAgY29uc3QgaW5pdGlhbFRleHQgPSBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgXHJcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIHN1Ym1pdEJ1dHRvbiwgaW5pdGlhbFRleHQsIGxvYWRpbmdUZXh0KTtcclxuICBcclxuICAgIHJldHVybiByZXF1ZXN0KClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGV2dC50YXJnZXQucmVzZXQoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpICBcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIHN1Ym1pdEJ1dHRvbiwgaW5pdGlhbFRleHQpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgIiwiaW1wb3J0IFwiLi4vaW5kZXguaHRtbFwiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBTZXR0aW5ncywgcmVzZXRWYWxpZGF0aW9uLCBlbmFibGVWYWxpZGF0aW9uIH0gZnJvbSBcIi4uL3ZhbGlkYXRpb24uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XHJcbmltcG9ydCBsb2dvIGZyb20gXCIuLi9pbWFnZXMvbG9nby5zdmdcIjtcclxuaW1wb3J0IGF2YXRhciBmcm9tIFwiLi4vaW1hZ2VzL2F2YXRhci5qcGdcIjtcclxuaW1wb3J0IHBlbmNpbEljb24gZnJvbSBcIi4uL2ltYWdlcy9wZW5jaWwtaWNvbi5zdmdcIjtcclxuaW1wb3J0IHBsdXNJY29uIGZyb20gXCIuLi9pbWFnZXMvcGx1cy5zdmdcIjtcclxuaW1wb3J0IHsgcmVuZGVyTG9hZGluZywgaGFuZGxlU3VibWl0IH0gZnJvbSBcIi4uL3V0aWxzL2Zvcm1oYW5kbGVyLmpzXCI7XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcclxuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xyXG5jb25zdCBtb2RhbEltYWdlID0gcHJldmlld01vZGFsPy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuY29uc3QgbW9kYWxDYXB0aW9uID0gcHJldmlld01vZGFsPy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVKb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xyXG5jb25zdCBuZXdQb3N0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1wb3N0LW1vZGFsXCIpO1xyXG5jb25zdCBhdmF0YXJQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcbmNvbnN0IGF2YXRhckVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BpY3R1cmUtYnRuXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG5jb25zdCBjbG9zZUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gIFwiLm1vZGFsX19jbG9zZS1idG4sIC5tb2RhbF9fY2xvc2UtcHJldmlld1wiXHJcbik7XHJcbmNvbnN0IGRlbGV0ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtbW9kYWxcIik7XHJcbmNvbnN0IGRlbGV0ZUNvbmZpcm1CdG4gPSBkZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnRuX2RlbGV0ZVwiKTtcclxuY29uc3QgZGVsZXRlQ2FuY2VsQnRuID0gZGVsZXRlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0bl9jYW5jZWxcIik7XHJcbmNvbnN0IGF2YXRhck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWF2YXRhci1tb2RhbFwiKTtcclxuY29uc3QgYXZhdGFySW5wdXQgPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhcl91cmxcIik7XHJcbmNvbnN0IGF2YXRhclN1Ym1pdEJ0biA9IGF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcclxuY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImVkaXQtcHJvZmlsZVwiXTtcclxuY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiZWRpdC1hdmF0YXJcIl07XHJcbmNvbnN0IHBvc3RGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJuZXctcG9zdFwiXTtcclxuY29uc3QgbmFtZUlucHV0ID0gcG9zdEZvcm0ucXVlcnlTZWxlY3RvcihcIiNuZXctcG9zdC1jYXB0aW9uLWlucHV0XCIpO1xyXG5jb25zdCBpbWFnZVVybElucHV0ID0gcG9zdEZvcm0ucXVlcnlTZWxlY3RvcihcIiNpbWFnZV91cmxcIik7XHJcblxyXG5jb25zdCBsb2dvSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2xvZ29cIik7XHJcbmNvbnN0IHBlbmNpbEljb25JbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuIGltZ1wiKTtcclxuY29uc3QgcGx1c0ljb25JbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG4gaW1nXCIpO1xyXG5pZiAobG9nb0ltZykgbG9nb0ltZy5zcmMgPSBsb2dvO1xyXG5pZiAocGVuY2lsSWNvbkltZykgcGVuY2lsSWNvbkltZy5zcmMgPSBwZW5jaWxJY29uO1xyXG5pZiAocGx1c0ljb25JbWcpIHBsdXNJY29uSW1nLnNyYyA9IHBsdXNJY29uO1xyXG5cclxubGV0IHNlbGVjdGVkQ2FyZDtcclxubGV0IHNlbGVjdGVkQ2FyZElkO1xyXG5sZXQgY3VycmVudFVzZXJJZDtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjQ2YzFhNjM5LTQyMTUtNDE4Yy04MjA1LTg3ZGVjMzdkNjhiN1wiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xyXG4gICAgY3VycmVudFVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcclxuICAgIHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgICBwcm9maWxlSm9iRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xyXG4gICAgYXZhdGFyUHJldmlldy5zcmMgPSB1c2VyRGF0YS5hdmF0YXIgfHwgYXZhdGFyO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyB1c2VyIGluZm86XCIsIGVycikpO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgICBjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZEVsZW1lbnQoY2FyZCk7XHJcbiAgICAgIGNhcmRMaXN0LmFwcGVuZENoaWxkKGNhcmRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIGNhcmRzOlwiLCBlcnIpKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmRFbGVtZW50KGRhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCJsaVwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgY29uc3QgY2FyZEltYWdlID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICBjb25zdCBjYXJkVGl0bGUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gIGNvbnN0IGNhcmRMaWtlZEJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XHJcbiAgY29uc3QgZGVsZXRlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xyXG5cclxuICBjYXJkSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xyXG4gIGNhcmRJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG5cclxuICBpZiAoZGF0YS5pc0xpa2VkKSB7XHJcbiAgICBjYXJkTGlrZWRCdG4uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnRuLS1saWtlZFwiKTtcclxuICB9XHJcblxyXG4gIGNhcmRMaWtlZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgY29uc3QgaXNDdXJyZW50bHlMaWtlZCA9IGNhcmRMaWtlZEJ0bi5jbGFzc0xpc3QuY29udGFpbnMoXHJcbiAgICAgIFwiY2FyZF9fbGlrZS1idG4tLWxpa2VkXCJcclxuICAgICk7XHJcblxyXG4gICAgYXBpXHJcbiAgICAgIC50b2dnbGVMaWtlKGRhdGEuX2lkLCAhaXNDdXJyZW50bHlMaWtlZClcclxuICAgICAgLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XHJcbiAgICAgICAgY2FyZExpa2VkQnRuLmNsYXNzTGlzdC50b2dnbGUoXHJcbiAgICAgICAgICBcImNhcmRfX2xpa2UtYnRuLS1saWtlZFwiLFxyXG4gICAgICAgICAgdXBkYXRlZENhcmQuaXNMaWtlZFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgdG9nZ2xpbmcgbGlrZTpcIiwgZXJyKSk7XHJcbiAgfSk7XHJcblxyXG4gIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgIG9wZW5JbWFnZU1vZGFsKGRhdGEubGluaywgZGF0YS5uYW1lKVxyXG4gICk7XHJcblxyXG4gIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBzZWxlY3RlZENhcmQgPSBjYXJkRWxlbWVudDtcclxuICAgIHNlbGVjdGVkQ2FyZElkID0gZGF0YS5faWQ7XHJcbiAgICBvcGVuUG9wdXAoZGVsZXRlTW9kYWwpO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbmRlbGV0ZUNvbmZpcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgaWYgKHNlbGVjdGVkQ2FyZElkKSB7XHJcbiAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBkZWxldGVDb25maXJtQnRuLnRleHRDb250ZW50O1xyXG4gICAgZGVsZXRlQ29uZmlybUJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcclxuXHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoc2VsZWN0ZWRDYXJkSWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBzZWxlY3RlZENhcmQucmVtb3ZlKCk7XHJcbiAgICAgICAgc2VsZWN0ZWRDYXJkID0gbnVsbDtcclxuICAgICAgICBzZWxlY3RlZENhcmRJZCA9IG51bGw7XHJcbiAgICAgICAgY2xvc2VQb3B1cChkZWxldGVNb2RhbCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgZGVsZXRpbmcgY2FyZDpcIiwgZXJyKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGRlbGV0ZUNvbmZpcm1CdG4udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5kZWxldGVDYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjbG9zZVBvcHVwKGRlbGV0ZU1vZGFsKTtcclxuICBzZWxlY3RlZENhcmQgPSBudWxsO1xyXG4gIHNlbGVjdGVkQ2FyZElkID0gbnVsbDtcclxufSk7XHJcblxyXG5hdmF0YXJFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgb3BlblBvcHVwKGF2YXRhck1vZGFsKTtcclxuICByZXNldFZhbGlkYXRpb24oYXZhdGFyRm9ybSwgU2V0dGluZ3MpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGVkaXRBdmF0YXJGb3JtU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IGF2YXRhclVybCA9IGF2YXRhcklucHV0LnZhbHVlLnRyaW0oKTtcclxuXHJcbiAgaWYgKGF2YXRhclVybCkge1xyXG4gICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gYXZhdGFyU3VibWl0QnRuLnRleHRDb250ZW50O1xyXG4gICAgYXZhdGFyU3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuXHJcbiAgICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcclxuICAgICAgcmV0dXJuIGFwaS5lZGl0UHJvZmlsZUF2YXRhcih7IGF2YXRhcjogYXZhdGFyVXJsIH0pLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICAgICAgYXZhdGFyUHJldmlldy5zcmMgPSB1c2VyRGF0YS5hdmF0YXIgfHwgYXZhdGFyO1xyXG4gICAgICAgIGNsb3NlUG9wdXAoYXZhdGFyTW9kYWwpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIGV2dCkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGF2YXRhclN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dDtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb3BlbkltYWdlTW9kYWwoaW1hZ2VVcmwsIGltYWdlQ2FwdGlvbikge1xyXG4gIGlmICghcHJldmlld01vZGFsIHx8ICFtb2RhbEltYWdlIHx8ICFtb2RhbENhcHRpb24pIHJldHVybjtcclxuICBtb2RhbEltYWdlLnNyYyA9IGltYWdlVXJsO1xyXG4gIG1vZGFsSW1hZ2UuYWx0ID0gaW1hZ2VDYXB0aW9uO1xyXG4gIG1vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCA9IGltYWdlQ2FwdGlvbjtcclxuICBvcGVuUG9wdXAocHJldmlld01vZGFsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlblBvcHVwKHBvcHVwKSB7XHJcbiAgcG9wdXAuY2xhc3NMaXN0LmFkZChcIm1vZGFsLS1vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjS2V5KTtcclxuICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2xpY2tPdXRzaWRlTW9kYWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZVBvcHVwKHBvcHVwKSB7XHJcbiAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsLS1vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjS2V5KTtcclxuICBwb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2xpY2tPdXRzaWRlTW9kYWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFc2NLZXkoZXZlbnQpIHtcclxuICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBjb25zdCBvcGVuZWRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtLW9wZW5lZFwiKTtcclxuICAgIGlmIChvcGVuZWRNb2RhbCkgY2xvc2VQb3B1cChvcGVuZWRNb2RhbCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDbGlja091dHNpZGVNb2RhbChlKSB7XHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSBjbG9zZVBvcHVwKGUudGFyZ2V0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XHJcbiAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XHJcbiAgICByZXR1cm4gYXBpXHJcbiAgICAgIC5lZGl0VXNlckluZm8oe1xyXG4gICAgICAgIG5hbWU6IHByb2ZpbGVGb3JtLm5hbWUudmFsdWUsXHJcbiAgICAgICAgYWJvdXQ6IHByb2ZpbGVGb3JtLmRlc2NyaXB0aW9uLnZhbHVlLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigodXNlckRhdGEpID0+IHtcclxuICAgICAgICBwcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xyXG4gICAgICAgIHByb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50ID0gdXNlckRhdGEuYWJvdXQ7XHJcbiAgICAgICAgY2xvc2VQb3B1cChlZGl0UHJvZmlsZU1vZGFsKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIGV2dCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCBuYW1lID0gbmFtZUlucHV0LnZhbHVlLnRyaW0oKTtcclxuICBjb25zdCBsaW5rID0gaW1hZ2VVcmxJbnB1dC52YWx1ZS50cmltKCk7XHJcblxyXG4gIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xyXG4gICAgcmV0dXJuIGFwaS5hZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KS50aGVuKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmRFbGVtZW50KGNhcmREYXRhKTtcclxuICAgICAgY2FyZExpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICAgIGNsb3NlUG9wdXAobmV3UG9zdE1vZGFsKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlU3VibWl0KG1ha2VSZXF1ZXN0LCBldnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVTdWJtaXRCdXR0b24ocG9zdEZvcm0pIHtcclxuICBpZiAoIXBvc3RGb3JtKSB7XHJcbiAgICBjb25zb2xlLndhcm4oXCJQb3N0IGZvcm0gbm90IHByb3ZpZGVkIVwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHBvc3RGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XHJcbiAgY29uc3QgY2FwdGlvbiA9IHBvc3RGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtY2FwdGlvbi1pbnB1dFwiKTtcclxuICBjb25zdCBpbWFnZVVybCA9IHBvc3RGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2VfdXJsXCIpO1xyXG5cclxuICBpZiAoIXN1Ym1pdEJ1dHRvbiB8fCAhY2FwdGlvbiB8fCAhaW1hZ2VVcmwpIHtcclxuICAgIGNvbnNvbGUud2FybihcIkZvcm0gZWxlbWVudHMgbm90IGZvdW5kLlwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IGlzVmFsaWQgPSBjYXB0aW9uLnZhbHVlLnRyaW0oKSAhPT0gXCJcIiAmJiBpbWFnZVVybC52YWx1ZS50cmltKCkgIT09IFwiXCI7XHJcbiAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gIWlzVmFsaWQ7XHJcbiAgc3VibWl0QnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlZFwiLCAhaXNWYWxpZCk7XHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBwcm9maWxlQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjb25zdCBwb3N0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wibmV3LXBvc3RcIl07XHJcbiAgICBvcGVuUG9wdXAobmV3UG9zdE1vZGFsKTtcclxuICAgIHJlc2V0VmFsaWRhdGlvbihwb3N0Rm9ybSwgU2V0dGluZ3MpO1xyXG5cclxuICAgIGNvbnN0IGNhcHRpb25JbnB1dCA9IHBvc3RGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtY2FwdGlvbi1pbnB1dFwiKTtcclxuICAgIGNvbnN0IGltYWdlVXJsSW5wdXQgPSBwb3N0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlX3VybFwiKTtcclxuICB9KTtcclxuXHJcbiAgcHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHByb2ZpbGVGb3JtLm5hbWUudmFsdWUgPSBwcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQ7XHJcbiAgICBwcm9maWxlRm9ybS5kZXNjcmlwdGlvbi52YWx1ZSA9IHByb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50O1xyXG4gICAgb3BlblBvcHVwKGVkaXRQcm9maWxlTW9kYWwpO1xyXG4gICAgcmVzZXRWYWxpZGF0aW9uKHByb2ZpbGVGb3JtLCBTZXR0aW5ncyk7XHJcbiAgfSk7XHJcblxyXG4gIHByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xyXG4gIGRvY3VtZW50LmZvcm1zW1wibmV3LXBvc3RcIl0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVDYXJkRm9ybVN1Ym1pdCk7XHJcbiAgYXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGVkaXRBdmF0YXJGb3JtU3VibWl0KTtcclxuXHJcbiAgY2xvc2VCdG5zLmZvckVhY2goKGJ0bikgPT5cclxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VQb3B1cChidG4uY2xvc2VzdChcIi5tb2RhbFwiKSkpXHJcbiAgKTtcclxufSk7XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKFNldHRpbmdzKTtcclxuIl0sIm5hbWVzIjpbImNvZGUiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInAiLCJTZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJjb25maWciLCJlcnJvckVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50IiwicmVzZXRWYWxpZGF0aW9uIiwiZm9ybUVsZW1lbnQiLCJpbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwic3VibWl0QnV0dG9uIiwiZm9yRWFjaCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiYnV0dG9uRWxlbWVudCIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwiYnV0dG9uIiwiYnV0dG9uVGV4dCIsImxvYWRpbmdUZXh0IiwiaGFuZGxlU3VibWl0IiwicmVxdWVzdCIsImV2dCIsInByZXZlbnREZWZhdWx0Iiwic3VibWl0dGVyIiwiaW5pdGlhbFRleHQiLCJ0aGVuIiwidGFyZ2V0IiwicmVzZXQiLCJjYXRjaCIsImNvbnNvbGUiLCJlcnJvciIsImZpbmFsbHkiLCJjYXJkTGlzdCIsImNhcmRUZW1wbGF0ZSIsInByZXZpZXdNb2RhbCIsIm1vZGFsSW1hZ2UiLCJtb2RhbENhcHRpb24iLCJwcm9maWxlTmFtZUVsZW1lbnQiLCJwcm9maWxlSm9iRWxlbWVudCIsImVkaXRQcm9maWxlTW9kYWwiLCJuZXdQb3N0TW9kYWwiLCJhdmF0YXJQcmV2aWV3IiwiYXZhdGFyRWRpdEJ0biIsInByb2ZpbGVBZGRCdG4iLCJjbG9zZUJ0bnMiLCJkZWxldGVNb2RhbCIsImRlbGV0ZUNvbmZpcm1CdG4iLCJkZWxldGVDYW5jZWxCdG4iLCJhdmF0YXJNb2RhbCIsImF2YXRhcklucHV0IiwiYXZhdGFyU3VibWl0QnRuIiwicHJvZmlsZUVkaXRCdG4iLCJwcm9maWxlRm9ybSIsImZvcm1zIiwiYXZhdGFyRm9ybSIsInBvc3RGb3JtIiwibmFtZUlucHV0IiwiaW1hZ2VVcmxJbnB1dCIsImxvZ29JbWciLCJwZW5jaWxJY29uSW1nIiwicGx1c0ljb25JbWciLCJzZWxlY3RlZENhcmQiLCJzZWxlY3RlZENhcmRJZCIsImN1cnJlbnRVc2VySWQiLCJzcmMiLCJsb2dvIiwicGVuY2lsSWNvbiIsInBsdXNJY29uIiwiYXBpIiwiY29uc3RydWN0b3IiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiRXJyb3IiLCJzdGF0dXMiLCJfcmVxdWVzdCIsImVuZHBvaW50Iiwib3B0aW9ucyIsImZldGNoIiwiaGFuZGxlRXJyb3IiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImVkaXRQcm9maWxlQXZhdGFyIiwiYXZhdGFyIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlZGl0VXNlckluZm8iLCJuYW1lIiwiYWJvdXQiLCJhZGROZXdDYXJkIiwibGluayIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJ0b2dnbGVMaWtlIiwiaXNMaWtlZCIsImdldFVzZXJBbmRDYXJkcyIsImFsbCIsInVzZXJEYXRhIiwiY2FyZHMiLCJlcnIiLCJhdXRob3JpemF0aW9uIiwiY3JlYXRlQ2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZEltYWdlIiwiY2FyZFRpdGxlIiwiY2FyZExpa2VkQnRuIiwiZGVsZXRlQnRuIiwiYWx0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImlzQ3VycmVudGx5TGlrZWQiLCJjb250YWlucyIsIl9pZCIsInVwZGF0ZWRDYXJkIiwidG9nZ2xlIiwib3BlbkltYWdlTW9kYWwiLCJpbWFnZVVybCIsImltYWdlQ2FwdGlvbiIsIm9wZW5Qb3B1cCIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJlZGl0QXZhdGFyRm9ybVN1Ym1pdCIsImF2YXRhclVybCIsInZhbHVlIiwidHJpbSIsIm9yaWdpbmFsVGV4dCIsIm1ha2VSZXF1ZXN0IiwiY2xvc2VQb3B1cCIsInBvcHVwIiwiaGFuZGxlRXNjS2V5IiwiaGFuZGxlQ2xpY2tPdXRzaWRlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJvcGVuZWRNb2RhbCIsImhhbmRsZVByb2ZpbGVGb3JtU3VibWl0IiwiZGVzY3JpcHRpb24iLCJoYW5kbGVDYXJkRm9ybVN1Ym1pdCIsImNhcmREYXRhIiwicHJlcGVuZCIsImNhcmQiLCJhcHBlbmRDaGlsZCIsImJ0biIsImNsb3Nlc3QiLCJzZXRFdmVudExpc3RlbmVycyIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9