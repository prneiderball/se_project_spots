!function(){var e={817:function(e){e.exports='<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"/> <meta name="viewport" content="width=device-width,initial-scale=1"/> <meta name="author" content="P.R.Neider-Ball"/> <meta name="description" content="Spots"/> <meta name="keywords" content="Photo sharing, Portrait photographers"/> <title>Spots</title> </head> <body class="page"> <header class="header"> <img src="<%=require(\'../src/images/logo.svg\')%>" alt="Spots Logo" class="header__logo"/> </header> <main class="content"> <section class="profile page__section"> <div class="profile__picture-container"> <img src="<%=require(\'../src/images/avatar.jpg\')%>" alt="Bessie Coleman" class="profile__avatar"/> <button class="profile__picture-btn"> <img class="profile__edit-icon" src="<%= require(\'../src/images/editavatar.png\') %>" alt="Edit icon"/> </button> </div> <div class="profile__column"> <h1 class="profile__name">Bessie Coleman</h1> <p class="profile__description">Civil Aviator</p> <button type="button" class="profile__edit-btn button"> <img src="<%=require(\'../src/images/pencil-icon.svg\')%>" alt="Edit icon"/>Edit Profile </button> </div> <button type="button" class="profile__add-btn button"> <img src="<%=require(\'../src/images/plus.svg\')%>" alt="Plus icon"/> New Post </button> </section> <div class="cards page__section"> <ul class="cards__list"> </ul> </div> </main> <footer class="footer page__section"> <h2 class="footer__content">2025 Â© Spots</h2> </footer> <template id="card-template"> <li class="card"> <div class="card__image-container"> <img alt="Image related to the card content" class="card__image"/> <button type="button" class="card__delete-btn button"></button> </div> <div class="card__content"> <h2 class="card__title"></h2> <button type="button" class="card__like-btn button"></button> </div> </li> </template> <div class="modal modal--edit-profile" id="edit-profile-modal"> <div class="modal__container"> <button type="button" class="modal__close-btn"></button> <h2 class="modal__title">Edit Profile</h2> <form id="edit-profile" name="edit-profile" class="modal__form"> <label for="name" class="modal__label"> Name <input id="name" type="text" class="modal__input" placeholder="Type your name" minlength="2" maxlength="40" required/> <span id="name-error" class="modal__error"></span> </label> <label for="description" class="modal__label"> Description <input id="description" type="text" class="modal__input" placeholder="Describe yourself" minlength="2" maxlength="200" required/> <span id="description-error" class="modal__error"></span> </label> <button type="submit" class="modal__submit-btn button">Save</button> </form> </div> </div> <div class="modal modal--new-post" id="new-post-modal"> <div class="modal__container"> <button type="button" class="modal__close-btn button"></button> <h2 class="modal__title">New Post</h2> <form id="new-post" name="new-post" class="modal__form"> <label for="image_url" class="modal__label"> Image link <input id="image_url" type="url" class="modal__input" placeholder="Paste a link to the picture" required/> <span id="image_url-error" class="modal__error"></span> </label> <label for="new-post-caption-input" class="modal__label"> Caption <input id="new-post-caption-input" type="text" class="modal__input" placeholder="Type your caption" minlength="2" maxlength="30" required/> <span id="new-post-caption-input-error" class="modal__error"></span> </label> <button type="submit" class="modal__submit-btn button modal__submit-btn--disabled" disabled="disabled"> Save </button> </form> </div> </div> <div class="modal" id="preview-modal"> <div class="modal__content modal__content--preview"> <button type="button" class="modal__close-preview"></button> <figure class="modal__figure"> <img src="#" alt="Preview of the selected image" class="modal__image"/> <figcaption class="modal__caption"></figcaption> </figure> </div> </div> <div class="modal" id="delete-modal"> <div class="modal__container modal__container_delete"> <button type="button" class="modal__close-btn del__close-btn"></button> <h3 class="modal__title modal__title_delete">Are you sure you want to delete this image?</h3> <form id="delete-form" class="modal__form delete__form" novalidate> <div class="delete-buttons-container"> <button type="submit" class="modal__submit-btn modal__submit-btn_delete">Delete</button> <button type="button" class="modal__submit-btn modal__submit-btn_cancel">Cancel</button> </div> </form> </div> </div> <div class="modal modal--edit-avatar" id="edit-avatar-modal"> <div class="modal__container"> <button type="button" class="modal__close-btn button"></button> <h2 class="modal__title">Edit profile avatar</h2> <form id="edit-avatar" name="edit-avatar" class="modal__form"> <label for="avatar_url" class="modal__label"> Profile Picture <input id="avatar_url" type="url" class="modal__input" placeholder="Paste the link to an image" required/> <span id="avatar_url-error" class="modal__error"></span> </label> <button type="submit" class="modal__submit-btn button modal__submit-btn--disabled" disabled="disabled"> Save </button> </form> </div> </div> </body> </html>'}},t={};function o(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,o),n.exports}o.p="/",function(){"use strict";o(817);const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn--disabled",inputErrorClass:"modal__input--error",errorClass:"modal__error--active"},t=(e,t)=>{const o=document.querySelector(`#${e.id}-error`);o&&(e.classList.remove(t.inputErrorClass),o.textContent="",o.classList.remove(t.errorClass))},a=(e,o)=>{const a=Array.from(e.querySelectorAll(o.inputSelector)),n=e.querySelector(o.submitButtonSelector);a.forEach((e=>{t(e,o)})),r(a,n,o)},r=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?(t.classList.add(o.inactiveButtonClass),t.setAttribute("disabled",!0)):(t.classList.remove(o.inactiveButtonClass),t.removeAttribute("disabled"))};var n=o.p+"images/logo.svg",l=o.p+"images/avatar.jpg",s=o.p+"images/pencil-icon.svg",i=o.p+"images/plus.svg";function d(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Save",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Saving...";t.textContent=e?a:o}function c(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving...";t.preventDefault();const a=t.submitter,r=a.textContent;return d(!0,a,r,o),e().then((()=>{t.target.reset()})).catch(console.error).finally((()=>{d(!1,a,r)}))}const u=document.querySelector(".cards__list"),m=document.querySelector("#card-template"),_=document.querySelector("#preview-modal"),p=_?.querySelector(".modal__image"),b=_?.querySelector(".modal__caption"),v=document.querySelector(".profile__name"),h=document.querySelector(".profile__description"),f=document.querySelector("#edit-profile-modal"),g=document.querySelector("#new-post-modal"),y=document.querySelector(".profile__avatar"),S=document.querySelector(".profile__picture-btn"),q=document.querySelector(".profile__add-btn"),E=document.querySelectorAll(".modal__close-btn, .modal__close-preview"),C=document.querySelector("#delete-modal"),k=C.querySelector(".modal__submit-btn_delete"),L=C.querySelector(".modal__submit-btn_cancel"),w=document.querySelector("#edit-avatar-modal"),x=w.querySelector("#avatar_url"),P=w.querySelector(".modal__submit-btn"),A=document.querySelector(".profile__edit-btn"),D=document.forms["edit-profile"],U=document.forms["edit-avatar"],I=document.forms["new-post"],T=I.querySelector("#new-post-caption-input"),N=I.querySelector("#image_url"),B=document.querySelector(".header__logo"),$=document.querySelector(".profile__edit-btn img"),O=document.querySelector(".profile__add-btn img");let j,J,R;B&&(B.src=n),$&&($.src=s),O&&(O.src=i);const H=new class{constructor(e){let{baseUrl:t,headers:o}=e;this._baseUrl=t,this._headers=o}_checkResponse(e){return e.ok?e.json():Promise.reject(new Error(`Error: ${e.status}`))}_request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(`${this._baseUrl}${e}`,t).then(this._checkResponse).catch(this.handleError)}getUserInfo(){return this._request("/users/me",{headers:this._headers})}getInitialCards(){return this._request("/cards",{headers:this._headers})}editProfileAvatar(e){let{avatar:t}=e;return this._request("/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})})}editUserInfo(e){let{name:t,about:o}=e;return this._request("/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:o})})}addNewCard(e){let{name:t,link:o}=e;return this._request("/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:o})})}deleteCard(e){return this._request(`/cards/${e}`,{method:"DELETE",headers:this._headers})}toggleLike(e,t){return this._request(`/cards/${e}/likes`,{method:t?"PUT":"DELETE",headers:this._headers})}getUserAndCards(){return Promise.all([this.getUserInfo(),this.getInitialCards()]).then((e=>{let[t,o]=e;return{userData:t,cards:o}}))}handleError(e){throw console.error("API Error: ",e),e}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"46c1a639-4215-418c-8205-87dec37d68b7","Content-Type":"application/json"}});function M(e){const t=m.content.querySelector("li").cloneNode(!0),o=t.querySelector(".card__image"),a=t.querySelector(".card__title"),r=t.querySelector(".card__like-btn"),n=t.querySelector(".card__delete-btn");return o.src=e.link,o.alt=e.name,a.textContent=e.name,e.isLiked&&r.classList.add("card__like-btn--liked"),r.addEventListener("click",(()=>{const t=r.classList.contains("card__like-btn--liked");H.toggleLike(e._id,!t).then((e=>{r.classList.toggle("card__like-btn--liked",e.isLiked)})).catch((e=>console.error("Error toggling like:",e)))})),o.addEventListener("click",(()=>{return t=e.link,o=e.name,void(_&&p&&b&&(p.src=t,p.alt=o,b.textContent=o,F(_)));var t,o})),n.addEventListener("click",(o=>{o.stopPropagation(),j=t,J=e._id,F(C)})),t}function z(e){e.preventDefault();const t=x.value.trim();if(t){const o=P.textContent;function a(){return H.editProfileAvatar({avatar:t}).then((e=>{y.src=e.avatar||l,Y(w)}))}P.textContent="Saving...",c(a,e).finally((()=>{P.textContent=o}))}}function F(e){e.classList.add("modal--opened"),document.addEventListener("keydown",G),e.addEventListener("click",K)}function Y(e){e.classList.remove("modal--opened"),document.removeEventListener("keydown",G),e.removeEventListener("click",K)}function G(e){if("Escape"===e.key){const e=document.querySelector(".modal--opened");e&&Y(e)}}function K(e){e.target.classList.contains("modal")&&Y(e.target)}function Q(e){c((function(){return H.editUserInfo({name:D.name.value,about:D.description.value}).then((e=>{v.textContent=e.name,h.textContent=e.about,Y(f)}))}),e)}function V(e){e.preventDefault();const t=T.value.trim(),o=N.value.trim();c((function(){return H.addNewCard({name:t,link:o}).then((e=>{const t=M(e);u.prepend(t),Y(g)}))}),e)}var W;H.getUserInfo().then((e=>{R=e._id,v.textContent=e.name,h.textContent=e.about,y.src=e.avatar||l})).catch((e=>console.error("Error fetching user info:",e))),H.getInitialCards().then((e=>{e.forEach((e=>{const t=M(e);u.appendChild(t)}))})).catch((e=>console.error("Error loading cards:",e))),k.addEventListener("click",(e=>{if(e.preventDefault(),J){const e=k.textContent;k.textContent="Deleting...",H.deleteCard(J).then((()=>{j.remove(),j=null,J=null,Y(C)})).catch((e=>console.error("Error deleting card:",e))).finally((()=>{k.textContent=e}))}})),L.addEventListener("click",(()=>{Y(C),j=null,J=null})),S.addEventListener("click",(()=>{F(w),a(U,e)})),document.addEventListener("DOMContentLoaded",(()=>{q.addEventListener("click",(()=>{const t=document.forms["new-post"];F(g),a(t,e),t.querySelector("#new-post-caption-input"),t.querySelector("#image_url")})),A.addEventListener("click",(()=>{D.name.value=v.textContent,D.description.value=h.textContent,F(f),a(D,e)})),D.addEventListener("submit",Q),document.forms["new-post"].addEventListener("submit",V),U.addEventListener("submit",z),E.forEach((e=>e.addEventListener("click",(()=>Y(e.closest(".modal"))))))})),W=e,document.querySelectorAll(W.formSelector).forEach((e=>{((e,o)=>{const a=Array.from(e.querySelectorAll(o.inputSelector)),n=e.querySelector(o.submitButtonSelector);a.forEach((e=>{e.addEventListener("input",(()=>{((e,o,a)=>{o.validity.valid?t(o,a):((e,t,o)=>{const a=document.querySelector(`#${e.id}-error`);a&&(e.classList.add(o.inputErrorClass),a.textContent=t,a.classList.add(o.errorClass))})(o,o.validationMessage,a)})(0,e,o),r(a,n,o)}))})),r(a,n,o)})(e,W)}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFhNkksaUJBQWlCLFNBQVMsS0FwQ2hCb0MsRUFBQ3ZLLEVBQWFWLEVBQWNDLEtBQ2hERCxFQUFhcUIsU0FBU0MsTUFHekJ2QixFQUFlQyxFQUFjQyxHQXRCVmlMLEVBQUNsTCxFQUFjbUwsRUFBY2xMLEtBQ2xELE1BQU1DLEVBQWVDLFNBQVNDLGNBQWMsSUFBSUosRUFBYUssWUFDeERILElBRUxGLEVBQWFNLFVBQVVrQixJQUFJdkIsRUFBT0osaUJBQ2xDSyxFQUFhTSxZQUFjMkssRUFDM0JqTCxFQUFhSSxVQUFVa0IsSUFBSXZCLEVBQU9ILFlBQVcsRUFjM0NvTCxDQUFlbEwsRUFBY0EsRUFBYW9MLGtCQUFtQm5MLEVBRy9ELEVBZ0NJZ0wsQ0FBbUJ2SyxFQUFhVixFQUFjQyxHQUM5Q2dCLEVBQWtCTixFQUFXSSxFQUFjZCxFQUFPLEdBQ2xELElBR0pnQixFQUFrQk4sRUFBV0ksRUFBY2QsRUFBTyxFQU1oRCtLLENBQWtCdEssRUFBYVQsRUFBTyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9pbmRleC5odG1sIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9mb3JtaGFuZGxlci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjwhRE9DVFlQRSBodG1sPiA8aHRtbCBsYW5nPVxcXCJlblxcXCI+IDxoZWFkPiA8bWV0YSBjaGFyc2V0PVxcXCJVVEYtOFxcXCIvPiA8bWV0YSBuYW1lPVxcXCJ2aWV3cG9ydFxcXCIgY29udGVudD1cXFwid2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MVxcXCIvPiA8bWV0YSBuYW1lPVxcXCJhdXRob3JcXFwiIGNvbnRlbnQ9XFxcIlAuUi5OZWlkZXItQmFsbFxcXCIvPiA8bWV0YSBuYW1lPVxcXCJkZXNjcmlwdGlvblxcXCIgY29udGVudD1cXFwiU3BvdHNcXFwiLz4gPG1ldGEgbmFtZT1cXFwia2V5d29yZHNcXFwiIGNvbnRlbnQ9XFxcIlBob3RvIHNoYXJpbmcsIFBvcnRyYWl0IHBob3RvZ3JhcGhlcnNcXFwiLz4gPHRpdGxlPlNwb3RzPC90aXRsZT4gPC9oZWFkPiA8Ym9keSBjbGFzcz1cXFwicGFnZVxcXCI+IDxoZWFkZXIgY2xhc3M9XFxcImhlYWRlclxcXCI+IDxpbWcgc3JjPVxcXCI8JT1yZXF1aXJlKCcuLi9zcmMvaW1hZ2VzL2xvZ28uc3ZnJyklPlxcXCIgYWx0PVxcXCJTcG90cyBMb2dvXFxcIiBjbGFzcz1cXFwiaGVhZGVyX19sb2dvXFxcIi8+IDwvaGVhZGVyPiA8bWFpbiBjbGFzcz1cXFwiY29udGVudFxcXCI+IDxzZWN0aW9uIGNsYXNzPVxcXCJwcm9maWxlIHBhZ2VfX3NlY3Rpb25cXFwiPiA8ZGl2IGNsYXNzPVxcXCJwcm9maWxlX19waWN0dXJlLWNvbnRhaW5lclxcXCI+IDxpbWcgc3JjPVxcXCI8JT1yZXF1aXJlKCcuLi9zcmMvaW1hZ2VzL2F2YXRhci5qcGcnKSU+XFxcIiBhbHQ9XFxcIkJlc3NpZSBDb2xlbWFuXFxcIiBjbGFzcz1cXFwicHJvZmlsZV9fYXZhdGFyXFxcIi8+IDxidXR0b24gY2xhc3M9XFxcInByb2ZpbGVfX3BpY3R1cmUtYnRuXFxcIj4gPGltZyBjbGFzcz1cXFwicHJvZmlsZV9fZWRpdC1pY29uXFxcIiBzcmM9XFxcIjwlPSByZXF1aXJlKCcuLi9zcmMvaW1hZ2VzL2VkaXRhdmF0YXIucG5nJykgJT5cXFwiIGFsdD1cXFwiRWRpdCBpY29uXFxcIi8+IDwvYnV0dG9uPiA8L2Rpdj4gPGRpdiBjbGFzcz1cXFwicHJvZmlsZV9fY29sdW1uXFxcIj4gPGgxIGNsYXNzPVxcXCJwcm9maWxlX19uYW1lXFxcIj5CZXNzaWUgQ29sZW1hbjwvaDE+IDxwIGNsYXNzPVxcXCJwcm9maWxlX19kZXNjcmlwdGlvblxcXCI+Q2l2aWwgQXZpYXRvcjwvcD4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJwcm9maWxlX19lZGl0LWJ0biBidXR0b25cXFwiPiA8aW1nIHNyYz1cXFwiPCU9cmVxdWlyZSgnLi4vc3JjL2ltYWdlcy9wZW5jaWwtaWNvbi5zdmcnKSU+XFxcIiBhbHQ9XFxcIkVkaXQgaWNvblxcXCIvPkVkaXQgUHJvZmlsZSA8L2J1dHRvbj4gPC9kaXY+IDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwicHJvZmlsZV9fYWRkLWJ0biBidXR0b25cXFwiPiA8aW1nIHNyYz1cXFwiPCU9cmVxdWlyZSgnLi4vc3JjL2ltYWdlcy9wbHVzLnN2ZycpJT5cXFwiIGFsdD1cXFwiUGx1cyBpY29uXFxcIi8+IE5ldyBQb3N0IDwvYnV0dG9uPiA8L3NlY3Rpb24+IDxkaXYgY2xhc3M9XFxcImNhcmRzIHBhZ2VfX3NlY3Rpb25cXFwiPiA8dWwgY2xhc3M9XFxcImNhcmRzX19saXN0XFxcIj4gPC91bD4gPC9kaXY+IDwvbWFpbj4gPGZvb3RlciBjbGFzcz1cXFwiZm9vdGVyIHBhZ2VfX3NlY3Rpb25cXFwiPiA8aDIgY2xhc3M9XFxcImZvb3Rlcl9fY29udGVudFxcXCI+MjAyNSDCqSBTcG90czwvaDI+IDwvZm9vdGVyPiA8dGVtcGxhdGUgaWQ9XFxcImNhcmQtdGVtcGxhdGVcXFwiPiA8bGkgY2xhc3M9XFxcImNhcmRcXFwiPiA8ZGl2IGNsYXNzPVxcXCJjYXJkX19pbWFnZS1jb250YWluZXJcXFwiPiA8aW1nIGFsdD1cXFwiSW1hZ2UgcmVsYXRlZCB0byB0aGUgY2FyZCBjb250ZW50XFxcIiBjbGFzcz1cXFwiY2FyZF9faW1hZ2VcXFwiLz4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJjYXJkX19kZWxldGUtYnRuIGJ1dHRvblxcXCI+PC9idXR0b24+IDwvZGl2PiA8ZGl2IGNsYXNzPVxcXCJjYXJkX19jb250ZW50XFxcIj4gPGgyIGNsYXNzPVxcXCJjYXJkX190aXRsZVxcXCI+PC9oMj4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJjYXJkX19saWtlLWJ0biBidXR0b25cXFwiPjwvYnV0dG9uPiA8L2Rpdj4gPC9saT4gPC90ZW1wbGF0ZT4gPGRpdiBjbGFzcz1cXFwibW9kYWwgbW9kYWwtLWVkaXQtcHJvZmlsZVxcXCIgaWQ9XFxcImVkaXQtcHJvZmlsZS1tb2RhbFxcXCI+IDxkaXYgY2xhc3M9XFxcIm1vZGFsX19jb250YWluZXJcXFwiPiA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcIm1vZGFsX19jbG9zZS1idG5cXFwiPjwvYnV0dG9uPiA8aDIgY2xhc3M9XFxcIm1vZGFsX190aXRsZVxcXCI+RWRpdCBQcm9maWxlPC9oMj4gPGZvcm0gaWQ9XFxcImVkaXQtcHJvZmlsZVxcXCIgbmFtZT1cXFwiZWRpdC1wcm9maWxlXFxcIiBjbGFzcz1cXFwibW9kYWxfX2Zvcm1cXFwiPiA8bGFiZWwgZm9yPVxcXCJuYW1lXFxcIiBjbGFzcz1cXFwibW9kYWxfX2xhYmVsXFxcIj4gTmFtZSA8aW5wdXQgaWQ9XFxcIm5hbWVcXFwiIHR5cGU9XFxcInRleHRcXFwiIGNsYXNzPVxcXCJtb2RhbF9faW5wdXRcXFwiIHBsYWNlaG9sZGVyPVxcXCJUeXBlIHlvdXIgbmFtZVxcXCIgbWlubGVuZ3RoPVxcXCIyXFxcIiBtYXhsZW5ndGg9XFxcIjQwXFxcIiByZXF1aXJlZC8+IDxzcGFuIGlkPVxcXCJuYW1lLWVycm9yXFxcIiBjbGFzcz1cXFwibW9kYWxfX2Vycm9yXFxcIj48L3NwYW4+IDwvbGFiZWw+IDxsYWJlbCBmb3I9XFxcImRlc2NyaXB0aW9uXFxcIiBjbGFzcz1cXFwibW9kYWxfX2xhYmVsXFxcIj4gRGVzY3JpcHRpb24gPGlucHV0IGlkPVxcXCJkZXNjcmlwdGlvblxcXCIgdHlwZT1cXFwidGV4dFxcXCIgY2xhc3M9XFxcIm1vZGFsX19pbnB1dFxcXCIgcGxhY2Vob2xkZXI9XFxcIkRlc2NyaWJlIHlvdXJzZWxmXFxcIiBtaW5sZW5ndGg9XFxcIjJcXFwiIG1heGxlbmd0aD1cXFwiMjAwXFxcIiByZXF1aXJlZC8+IDxzcGFuIGlkPVxcXCJkZXNjcmlwdGlvbi1lcnJvclxcXCIgY2xhc3M9XFxcIm1vZGFsX19lcnJvclxcXCI+PC9zcGFuPiA8L2xhYmVsPiA8YnV0dG9uIHR5cGU9XFxcInN1Ym1pdFxcXCIgY2xhc3M9XFxcIm1vZGFsX19zdWJtaXQtYnRuIGJ1dHRvblxcXCI+U2F2ZTwvYnV0dG9uPiA8L2Zvcm0+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz1cXFwibW9kYWwgbW9kYWwtLW5ldy1wb3N0XFxcIiBpZD1cXFwibmV3LXBvc3QtbW9kYWxcXFwiPiA8ZGl2IGNsYXNzPVxcXCJtb2RhbF9fY29udGFpbmVyXFxcIj4gPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJtb2RhbF9fY2xvc2UtYnRuIGJ1dHRvblxcXCI+PC9idXR0b24+IDxoMiBjbGFzcz1cXFwibW9kYWxfX3RpdGxlXFxcIj5OZXcgUG9zdDwvaDI+IDxmb3JtIGlkPVxcXCJuZXctcG9zdFxcXCIgbmFtZT1cXFwibmV3LXBvc3RcXFwiIGNsYXNzPVxcXCJtb2RhbF9fZm9ybVxcXCI+IDxsYWJlbCBmb3I9XFxcImltYWdlX3VybFxcXCIgY2xhc3M9XFxcIm1vZGFsX19sYWJlbFxcXCI+IEltYWdlIGxpbmsgPGlucHV0IGlkPVxcXCJpbWFnZV91cmxcXFwiIHR5cGU9XFxcInVybFxcXCIgY2xhc3M9XFxcIm1vZGFsX19pbnB1dFxcXCIgcGxhY2Vob2xkZXI9XFxcIlBhc3RlIGEgbGluayB0byB0aGUgcGljdHVyZVxcXCIgcmVxdWlyZWQvPiA8c3BhbiBpZD1cXFwiaW1hZ2VfdXJsLWVycm9yXFxcIiBjbGFzcz1cXFwibW9kYWxfX2Vycm9yXFxcIj48L3NwYW4+IDwvbGFiZWw+IDxsYWJlbCBmb3I9XFxcIm5ldy1wb3N0LWNhcHRpb24taW5wdXRcXFwiIGNsYXNzPVxcXCJtb2RhbF9fbGFiZWxcXFwiPiBDYXB0aW9uIDxpbnB1dCBpZD1cXFwibmV3LXBvc3QtY2FwdGlvbi1pbnB1dFxcXCIgdHlwZT1cXFwidGV4dFxcXCIgY2xhc3M9XFxcIm1vZGFsX19pbnB1dFxcXCIgcGxhY2Vob2xkZXI9XFxcIlR5cGUgeW91ciBjYXB0aW9uXFxcIiBtaW5sZW5ndGg9XFxcIjJcXFwiIG1heGxlbmd0aD1cXFwiMzBcXFwiIHJlcXVpcmVkLz4gPHNwYW4gaWQ9XFxcIm5ldy1wb3N0LWNhcHRpb24taW5wdXQtZXJyb3JcXFwiIGNsYXNzPVxcXCJtb2RhbF9fZXJyb3JcXFwiPjwvc3Bhbj4gPC9sYWJlbD4gPGJ1dHRvbiB0eXBlPVxcXCJzdWJtaXRcXFwiIGNsYXNzPVxcXCJtb2RhbF9fc3VibWl0LWJ0biBidXR0b24gbW9kYWxfX3N1Ym1pdC1idG4tLWRpc2FibGVkXFxcIiBkaXNhYmxlZD1cXFwiZGlzYWJsZWRcXFwiPiBTYXZlIDwvYnV0dG9uPiA8L2Zvcm0+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz1cXFwibW9kYWxcXFwiIGlkPVxcXCJwcmV2aWV3LW1vZGFsXFxcIj4gPGRpdiBjbGFzcz1cXFwibW9kYWxfX2NvbnRlbnQgbW9kYWxfX2NvbnRlbnQtLXByZXZpZXdcXFwiPiA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcIm1vZGFsX19jbG9zZS1wcmV2aWV3XFxcIj48L2J1dHRvbj4gPGZpZ3VyZSBjbGFzcz1cXFwibW9kYWxfX2ZpZ3VyZVxcXCI+IDxpbWcgc3JjPVxcXCIjXFxcIiBhbHQ9XFxcIlByZXZpZXcgb2YgdGhlIHNlbGVjdGVkIGltYWdlXFxcIiBjbGFzcz1cXFwibW9kYWxfX2ltYWdlXFxcIi8+IDxmaWdjYXB0aW9uIGNsYXNzPVxcXCJtb2RhbF9fY2FwdGlvblxcXCI+PC9maWdjYXB0aW9uPiA8L2ZpZ3VyZT4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPVxcXCJtb2RhbFxcXCIgaWQ9XFxcImRlbGV0ZS1tb2RhbFxcXCI+IDxkaXYgY2xhc3M9XFxcIm1vZGFsX19jb250YWluZXIgbW9kYWxfX2NvbnRhaW5lcl9kZWxldGVcXFwiPiA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcIm1vZGFsX19jbG9zZS1idG4gZGVsX19jbG9zZS1idG5cXFwiPjwvYnV0dG9uPiA8aDMgY2xhc3M9XFxcIm1vZGFsX190aXRsZSBtb2RhbF9fdGl0bGVfZGVsZXRlXFxcIj5BcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgaW1hZ2U/PC9oMz4gPGZvcm0gaWQ9XFxcImRlbGV0ZS1mb3JtXFxcIiBjbGFzcz1cXFwibW9kYWxfX2Zvcm0gZGVsZXRlX19mb3JtXFxcIiBub3ZhbGlkYXRlPiA8ZGl2IGNsYXNzPVxcXCJkZWxldGUtYnV0dG9ucy1jb250YWluZXJcXFwiPiA8YnV0dG9uIHR5cGU9XFxcInN1Ym1pdFxcXCIgY2xhc3M9XFxcIm1vZGFsX19zdWJtaXQtYnRuIG1vZGFsX19zdWJtaXQtYnRuX2RlbGV0ZVxcXCI+RGVsZXRlPC9idXR0b24+IDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwibW9kYWxfX3N1Ym1pdC1idG4gbW9kYWxfX3N1Ym1pdC1idG5fY2FuY2VsXFxcIj5DYW5jZWw8L2J1dHRvbj4gPC9kaXY+IDwvZm9ybT4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPVxcXCJtb2RhbCBtb2RhbC0tZWRpdC1hdmF0YXJcXFwiIGlkPVxcXCJlZGl0LWF2YXRhci1tb2RhbFxcXCI+IDxkaXYgY2xhc3M9XFxcIm1vZGFsX19jb250YWluZXJcXFwiPiA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcIm1vZGFsX19jbG9zZS1idG4gYnV0dG9uXFxcIj48L2J1dHRvbj4gPGgyIGNsYXNzPVxcXCJtb2RhbF9fdGl0bGVcXFwiPkVkaXQgcHJvZmlsZSBhdmF0YXI8L2gyPiA8Zm9ybSBpZD1cXFwiZWRpdC1hdmF0YXJcXFwiIG5hbWU9XFxcImVkaXQtYXZhdGFyXFxcIiBjbGFzcz1cXFwibW9kYWxfX2Zvcm1cXFwiPiA8bGFiZWwgZm9yPVxcXCJhdmF0YXJfdXJsXFxcIiBjbGFzcz1cXFwibW9kYWxfX2xhYmVsXFxcIj4gUHJvZmlsZSBQaWN0dXJlIDxpbnB1dCBpZD1cXFwiYXZhdGFyX3VybFxcXCIgdHlwZT1cXFwidXJsXFxcIiBjbGFzcz1cXFwibW9kYWxfX2lucHV0XFxcIiBwbGFjZWhvbGRlcj1cXFwiUGFzdGUgdGhlIGxpbmsgdG8gYW4gaW1hZ2VcXFwiIHJlcXVpcmVkLz4gPHNwYW4gaWQ9XFxcImF2YXRhcl91cmwtZXJyb3JcXFwiIGNsYXNzPVxcXCJtb2RhbF9fZXJyb3JcXFwiPjwvc3Bhbj4gPC9sYWJlbD4gPGJ1dHRvbiB0eXBlPVxcXCJzdWJtaXRcXFwiIGNsYXNzPVxcXCJtb2RhbF9fc3VibWl0LWJ0biBidXR0b24gbW9kYWxfX3N1Ym1pdC1idG4tLWRpc2FibGVkXFxcIiBkaXNhYmxlZD1cXFwiZGlzYWJsZWRcXFwiPiBTYXZlIDwvYnV0dG9uPiA8L2Zvcm0+IDwvZGl2PiA8L2Rpdj4gPC9ib2R5PiA8L2h0bWw+XCI7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGNvZGU7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiOyIsImV4cG9ydCBjb25zdCBTZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnRuXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bi0tZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LS1lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yLS1hY3RpdmVcIixcclxufTtcclxuXHJcbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBjb25maWcpID0+IHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgaWYgKCFlcnJvckVsZW1lbnQpIHJldHVybjtcclxuXHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5lcnJvckNsYXNzKTtcclxufTtcclxuXHJcbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gIGlmICghZXJyb3JFbGVtZW50KSByZXR1cm47XHJcblxyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmVycm9yQ2xhc3MpO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICBzaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSwgY29uZmlnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBjb25maWcpO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBjb25maWcpO1xyXG4gIH0pO1xyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIHN1Ym1pdEJ1dHRvbiwgY29uZmlnKTtcclxufTtcclxuXHJcbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IGlucHV0TGlzdC5zb21lKChpbnB1dCkgPT4gIWlucHV0LnZhbGlkaXR5LnZhbGlkKTtcclxuXHJcbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xyXG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIHN1Ym1pdEJ1dHRvbiwgY29uZmlnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIHN1Ym1pdEJ1dHRvbiwgY29uZmlnKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKTtcclxuICBmb3Jtcy5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCB2YWxpZGF0ZUZvcm0gPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGxldCBpc1ZhbGlkID0gdHJ1ZTtcclxuXHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICBpc1ZhbGlkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIHN1Ym1pdEJ1dHRvbiwgY29uZmlnKTtcclxuICBcclxuICByZXR1cm4gaXNWYWxpZDtcclxufTtcclxuIiwiY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCkpO1xyXG4gIH1cclxuXHJcbiAgX3JlcXVlc3QoZW5kcG9pbnQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9JHtlbmRwb2ludH1gLCBvcHRpb25zKVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFwiL3VzZXJzL21lXCIsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi9jYXJkc1wiLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZWRpdFByb2ZpbGVBdmF0YXIoeyBhdmF0YXIgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXCIvdXNlcnMvbWUvYXZhdGFyXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVkaXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFwiL3VzZXJzL21lXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWJvdXQgfSlcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXCIvY2FyZHNcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSlcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlTGlrZShjYXJkSWQsIGlzTGlrZWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIlBVVFwiIDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VyQW5kQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pXHJcbiAgICAgIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4gKHsgdXNlckRhdGEsIGNhcmRzIH0pKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUVycm9yKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkFQSSBFcnJvcjogXCIsIGVycik7XHJcbiAgICB0aHJvdyBlcnI7ICBcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwaTtcclxuIiwiZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBidXR0b24sIGJ1dHRvblRleHQgPSAnU2F2ZScsIGxvYWRpbmdUZXh0ID0gJ1NhdmluZy4uLicpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBleHBvcnQgZnVuY3Rpb24gaGFuZGxlU3VibWl0KHJlcXVlc3QsIGV2dCwgbG9hZGluZ1RleHQgPSAnU2F2aW5nLi4uJykge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgXHJcbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBldnQuc3VibWl0dGVyO1xyXG4gICAgY29uc3QgaW5pdGlhbFRleHQgPSBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgXHJcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIHN1Ym1pdEJ1dHRvbiwgaW5pdGlhbFRleHQsIGxvYWRpbmdUZXh0KTtcclxuICBcclxuICAgIHJldHVybiByZXF1ZXN0KClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGV2dC50YXJnZXQucmVzZXQoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpICBcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIHN1Ym1pdEJ1dHRvbiwgaW5pdGlhbFRleHQpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgIiwiaW1wb3J0IFwiLi4vaW5kZXguaHRtbFwiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBTZXR0aW5ncywgcmVzZXRWYWxpZGF0aW9uLCBlbmFibGVWYWxpZGF0aW9uIH0gZnJvbSBcIi4uL3ZhbGlkYXRpb24uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XHJcbmltcG9ydCBsb2dvIGZyb20gXCIuLi9pbWFnZXMvbG9nby5zdmdcIjtcclxuaW1wb3J0IGF2YXRhciBmcm9tIFwiLi4vaW1hZ2VzL2F2YXRhci5qcGdcIjtcclxuaW1wb3J0IHBlbmNpbEljb24gZnJvbSBcIi4uL2ltYWdlcy9wZW5jaWwtaWNvbi5zdmdcIjtcclxuaW1wb3J0IHBsdXNJY29uIGZyb20gXCIuLi9pbWFnZXMvcGx1cy5zdmdcIjtcclxuaW1wb3J0IHsgcmVuZGVyTG9hZGluZywgaGFuZGxlU3VibWl0IH0gZnJvbSBcIi4uL3V0aWxzL2Zvcm1oYW5kbGVyLmpzXCI7XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcclxuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xyXG5jb25zdCBtb2RhbEltYWdlID0gcHJldmlld01vZGFsPy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuY29uc3QgbW9kYWxDYXB0aW9uID0gcHJldmlld01vZGFsPy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVKb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xyXG5jb25zdCBuZXdQb3N0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1wb3N0LW1vZGFsXCIpO1xyXG5jb25zdCBhdmF0YXJQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcbmNvbnN0IGF2YXRhckVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BpY3R1cmUtYnRuXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG5jb25zdCBjbG9zZUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gIFwiLm1vZGFsX19jbG9zZS1idG4sIC5tb2RhbF9fY2xvc2UtcHJldmlld1wiXHJcbik7XHJcbmNvbnN0IGRlbGV0ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtbW9kYWxcIik7XHJcbmNvbnN0IGRlbGV0ZUNvbmZpcm1CdG4gPSBkZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnRuX2RlbGV0ZVwiKTtcclxuY29uc3QgZGVsZXRlQ2FuY2VsQnRuID0gZGVsZXRlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0bl9jYW5jZWxcIik7XHJcbmNvbnN0IGF2YXRhck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWF2YXRhci1tb2RhbFwiKTtcclxuY29uc3QgYXZhdGFySW5wdXQgPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhcl91cmxcIik7XHJcbmNvbnN0IGF2YXRhclN1Ym1pdEJ0biA9IGF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcclxuY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImVkaXQtcHJvZmlsZVwiXTtcclxuY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiZWRpdC1hdmF0YXJcIl07XHJcbmNvbnN0IHBvc3RGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJuZXctcG9zdFwiXTtcclxuY29uc3QgbmFtZUlucHV0ID0gcG9zdEZvcm0ucXVlcnlTZWxlY3RvcihcIiNuZXctcG9zdC1jYXB0aW9uLWlucHV0XCIpO1xyXG5jb25zdCBpbWFnZVVybElucHV0ID0gcG9zdEZvcm0ucXVlcnlTZWxlY3RvcihcIiNpbWFnZV91cmxcIik7XHJcblxyXG5jb25zdCBsb2dvSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2xvZ29cIik7XHJcbmNvbnN0IHBlbmNpbEljb25JbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuIGltZ1wiKTtcclxuY29uc3QgcGx1c0ljb25JbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG4gaW1nXCIpO1xyXG5pZiAobG9nb0ltZykgbG9nb0ltZy5zcmMgPSBsb2dvO1xyXG5pZiAocGVuY2lsSWNvbkltZykgcGVuY2lsSWNvbkltZy5zcmMgPSBwZW5jaWxJY29uO1xyXG5pZiAocGx1c0ljb25JbWcpIHBsdXNJY29uSW1nLnNyYyA9IHBsdXNJY29uO1xyXG5cclxubGV0IHNlbGVjdGVkQ2FyZDtcclxubGV0IHNlbGVjdGVkQ2FyZElkO1xyXG5sZXQgY3VycmVudFVzZXJJZDtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjQ2YzFhNjM5LTQyMTUtNDE4Yy04MjA1LTg3ZGVjMzdkNjhiN1wiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xyXG4gICAgY3VycmVudFVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcclxuICAgIHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgICBwcm9maWxlSm9iRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xyXG4gICAgYXZhdGFyUHJldmlldy5zcmMgPSB1c2VyRGF0YS5hdmF0YXIgfHwgYXZhdGFyO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyB1c2VyIGluZm86XCIsIGVycikpO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgICBjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZEVsZW1lbnQoY2FyZCk7XHJcbiAgICAgIGNhcmRMaXN0LmFwcGVuZENoaWxkKGNhcmRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIGNhcmRzOlwiLCBlcnIpKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmRFbGVtZW50KGRhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCJsaVwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgY29uc3QgY2FyZEltYWdlID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICBjb25zdCBjYXJkVGl0bGUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gIGNvbnN0IGNhcmRMaWtlZEJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XHJcbiAgY29uc3QgZGVsZXRlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xyXG5cclxuICBjYXJkSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xyXG4gIGNhcmRJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG5cclxuICBpZiAoZGF0YS5pc0xpa2VkKSB7XHJcbiAgICBjYXJkTGlrZWRCdG4uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnRuLS1saWtlZFwiKTtcclxuICB9XHJcblxyXG4gIGNhcmRMaWtlZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgY29uc3QgaXNDdXJyZW50bHlMaWtlZCA9IGNhcmRMaWtlZEJ0bi5jbGFzc0xpc3QuY29udGFpbnMoXHJcbiAgICAgIFwiY2FyZF9fbGlrZS1idG4tLWxpa2VkXCJcclxuICAgICk7XHJcblxyXG4gICAgYXBpXHJcbiAgICAgIC50b2dnbGVMaWtlKGRhdGEuX2lkLCAhaXNDdXJyZW50bHlMaWtlZClcclxuICAgICAgLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XHJcbiAgICAgICAgY2FyZExpa2VkQnRuLmNsYXNzTGlzdC50b2dnbGUoXHJcbiAgICAgICAgICBcImNhcmRfX2xpa2UtYnRuLS1saWtlZFwiLFxyXG4gICAgICAgICAgdXBkYXRlZENhcmQuaXNMaWtlZFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgdG9nZ2xpbmcgbGlrZTpcIiwgZXJyKSk7XHJcbiAgfSk7XHJcblxyXG4gIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgIG9wZW5JbWFnZU1vZGFsKGRhdGEubGluaywgZGF0YS5uYW1lKVxyXG4gICk7XHJcblxyXG4gIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBzZWxlY3RlZENhcmQgPSBjYXJkRWxlbWVudDtcclxuICAgIHNlbGVjdGVkQ2FyZElkID0gZGF0YS5faWQ7XHJcbiAgICBvcGVuUG9wdXAoZGVsZXRlTW9kYWwpO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbmRlbGV0ZUNvbmZpcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgaWYgKHNlbGVjdGVkQ2FyZElkKSB7XHJcbiAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBkZWxldGVDb25maXJtQnRuLnRleHRDb250ZW50O1xyXG4gICAgZGVsZXRlQ29uZmlybUJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcclxuXHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoc2VsZWN0ZWRDYXJkSWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBzZWxlY3RlZENhcmQucmVtb3ZlKCk7XHJcbiAgICAgICAgc2VsZWN0ZWRDYXJkID0gbnVsbDtcclxuICAgICAgICBzZWxlY3RlZENhcmRJZCA9IG51bGw7XHJcbiAgICAgICAgY2xvc2VQb3B1cChkZWxldGVNb2RhbCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgZGVsZXRpbmcgY2FyZDpcIiwgZXJyKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGRlbGV0ZUNvbmZpcm1CdG4udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5kZWxldGVDYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjbG9zZVBvcHVwKGRlbGV0ZU1vZGFsKTtcclxuICBzZWxlY3RlZENhcmQgPSBudWxsO1xyXG4gIHNlbGVjdGVkQ2FyZElkID0gbnVsbDtcclxufSk7XHJcblxyXG5hdmF0YXJFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgb3BlblBvcHVwKGF2YXRhck1vZGFsKTtcclxuICByZXNldFZhbGlkYXRpb24oYXZhdGFyRm9ybSwgU2V0dGluZ3MpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGVkaXRBdmF0YXJGb3JtU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IGF2YXRhclVybCA9IGF2YXRhcklucHV0LnZhbHVlLnRyaW0oKTtcclxuXHJcbiAgaWYgKGF2YXRhclVybCkge1xyXG4gICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gYXZhdGFyU3VibWl0QnRuLnRleHRDb250ZW50O1xyXG4gICAgYXZhdGFyU3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuXHJcbiAgICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcclxuICAgICAgcmV0dXJuIGFwaS5lZGl0UHJvZmlsZUF2YXRhcih7IGF2YXRhcjogYXZhdGFyVXJsIH0pLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICAgICAgYXZhdGFyUHJldmlldy5zcmMgPSB1c2VyRGF0YS5hdmF0YXIgfHwgYXZhdGFyO1xyXG4gICAgICAgIGNsb3NlUG9wdXAoYXZhdGFyTW9kYWwpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIGV2dCkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGF2YXRhclN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dDtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb3BlbkltYWdlTW9kYWwoaW1hZ2VVcmwsIGltYWdlQ2FwdGlvbikge1xyXG4gIGlmICghcHJldmlld01vZGFsIHx8ICFtb2RhbEltYWdlIHx8ICFtb2RhbENhcHRpb24pIHJldHVybjtcclxuICBtb2RhbEltYWdlLnNyYyA9IGltYWdlVXJsO1xyXG4gIG1vZGFsSW1hZ2UuYWx0ID0gaW1hZ2VDYXB0aW9uO1xyXG4gIG1vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCA9IGltYWdlQ2FwdGlvbjtcclxuICBvcGVuUG9wdXAocHJldmlld01vZGFsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlblBvcHVwKHBvcHVwKSB7XHJcbiAgcG9wdXAuY2xhc3NMaXN0LmFkZChcIm1vZGFsLS1vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjS2V5KTtcclxuICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2xpY2tPdXRzaWRlTW9kYWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZVBvcHVwKHBvcHVwKSB7XHJcbiAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsLS1vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjS2V5KTtcclxuICBwb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2xpY2tPdXRzaWRlTW9kYWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFc2NLZXkoZXZlbnQpIHtcclxuICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBjb25zdCBvcGVuZWRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtLW9wZW5lZFwiKTtcclxuICAgIGlmIChvcGVuZWRNb2RhbCkgY2xvc2VQb3B1cChvcGVuZWRNb2RhbCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDbGlja091dHNpZGVNb2RhbChlKSB7XHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSBjbG9zZVBvcHVwKGUudGFyZ2V0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XHJcbiAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XHJcbiAgICByZXR1cm4gYXBpXHJcbiAgICAgIC5lZGl0VXNlckluZm8oe1xyXG4gICAgICAgIG5hbWU6IHByb2ZpbGVGb3JtLm5hbWUudmFsdWUsXHJcbiAgICAgICAgYWJvdXQ6IHByb2ZpbGVGb3JtLmRlc2NyaXB0aW9uLnZhbHVlLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigodXNlckRhdGEpID0+IHtcclxuICAgICAgICBwcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xyXG4gICAgICAgIHByb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50ID0gdXNlckRhdGEuYWJvdXQ7XHJcbiAgICAgICAgY2xvc2VQb3B1cChlZGl0UHJvZmlsZU1vZGFsKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIGV2dCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCBuYW1lID0gbmFtZUlucHV0LnZhbHVlLnRyaW0oKTtcclxuICBjb25zdCBsaW5rID0gaW1hZ2VVcmxJbnB1dC52YWx1ZS50cmltKCk7XHJcblxyXG4gIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xyXG4gICAgcmV0dXJuIGFwaS5hZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KS50aGVuKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmRFbGVtZW50KGNhcmREYXRhKTtcclxuICAgICAgY2FyZExpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICAgIGNsb3NlUG9wdXAobmV3UG9zdE1vZGFsKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlU3VibWl0KG1ha2VSZXF1ZXN0LCBldnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVTdWJtaXRCdXR0b24ocG9zdEZvcm0pIHtcclxuICBpZiAoIXBvc3RGb3JtKSB7XHJcbiAgICBjb25zb2xlLndhcm4oXCJQb3N0IGZvcm0gbm90IHByb3ZpZGVkIVwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHBvc3RGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XHJcbiAgY29uc3QgY2FwdGlvbiA9IHBvc3RGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtY2FwdGlvbi1pbnB1dFwiKTtcclxuICBjb25zdCBpbWFnZVVybCA9IHBvc3RGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2VfdXJsXCIpO1xyXG5cclxuICBpZiAoIXN1Ym1pdEJ1dHRvbiB8fCAhY2FwdGlvbiB8fCAhaW1hZ2VVcmwpIHtcclxuICAgIGNvbnNvbGUud2FybihcIkZvcm0gZWxlbWVudHMgbm90IGZvdW5kLlwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IGlzVmFsaWQgPSBjYXB0aW9uLnZhbHVlLnRyaW0oKSAhPT0gXCJcIiAmJiBpbWFnZVVybC52YWx1ZS50cmltKCkgIT09IFwiXCI7XHJcbiAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gIWlzVmFsaWQ7XHJcbiAgc3VibWl0QnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlZFwiLCAhaXNWYWxpZCk7XHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBwcm9maWxlQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjb25zdCBwb3N0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wibmV3LXBvc3RcIl07XHJcbiAgICBvcGVuUG9wdXAobmV3UG9zdE1vZGFsKTtcclxuICAgIHJlc2V0VmFsaWRhdGlvbihwb3N0Rm9ybSwgU2V0dGluZ3MpO1xyXG5cclxuICAgIGNvbnN0IGNhcHRpb25JbnB1dCA9IHBvc3RGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtY2FwdGlvbi1pbnB1dFwiKTtcclxuICAgIGNvbnN0IGltYWdlVXJsSW5wdXQgPSBwb3N0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlX3VybFwiKTtcclxuICB9KTtcclxuXHJcbiAgcHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHByb2ZpbGVGb3JtLm5hbWUudmFsdWUgPSBwcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQ7XHJcbiAgICBwcm9maWxlRm9ybS5kZXNjcmlwdGlvbi52YWx1ZSA9IHByb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50O1xyXG4gICAgb3BlblBvcHVwKGVkaXRQcm9maWxlTW9kYWwpO1xyXG4gICAgcmVzZXRWYWxpZGF0aW9uKHByb2ZpbGVGb3JtLCBTZXR0aW5ncyk7XHJcbiAgfSk7XHJcblxyXG4gIHByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xyXG4gIGRvY3VtZW50LmZvcm1zW1wibmV3LXBvc3RcIl0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVDYXJkRm9ybVN1Ym1pdCk7XHJcbiAgYXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGVkaXRBdmF0YXJGb3JtU3VibWl0KTtcclxuXHJcbiAgY2xvc2VCdG5zLmZvckVhY2goKGJ0bikgPT5cclxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VQb3B1cChidG4uY2xvc2VzdChcIi5tb2RhbFwiKSkpXHJcbiAgKTtcclxufSk7XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKFNldHRpbmdzKTtcclxuIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwicCIsIlNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImNvbmZpZyIsImVycm9yRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JtRWxlbWVudCIsImlucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzdWJtaXRCdXR0b24iLCJmb3JFYWNoIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJidXR0b25FbGVtZW50Iiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImFkZCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInJlbmRlckxvYWRpbmciLCJpc0xvYWRpbmciLCJidXR0b24iLCJidXR0b25UZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwibG9hZGluZ1RleHQiLCJoYW5kbGVTdWJtaXQiLCJyZXF1ZXN0IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJzdWJtaXR0ZXIiLCJpbml0aWFsVGV4dCIsInRoZW4iLCJ0YXJnZXQiLCJyZXNldCIsImNhdGNoIiwiY29uc29sZSIsImVycm9yIiwiZmluYWxseSIsImNhcmRMaXN0IiwiY2FyZFRlbXBsYXRlIiwicHJldmlld01vZGFsIiwibW9kYWxJbWFnZSIsIm1vZGFsQ2FwdGlvbiIsInByb2ZpbGVOYW1lRWxlbWVudCIsInByb2ZpbGVKb2JFbGVtZW50IiwiZWRpdFByb2ZpbGVNb2RhbCIsIm5ld1Bvc3RNb2RhbCIsImF2YXRhclByZXZpZXciLCJhdmF0YXJFZGl0QnRuIiwicHJvZmlsZUFkZEJ0biIsImNsb3NlQnRucyIsImRlbGV0ZU1vZGFsIiwiZGVsZXRlQ29uZmlybUJ0biIsImRlbGV0ZUNhbmNlbEJ0biIsImF2YXRhck1vZGFsIiwiYXZhdGFySW5wdXQiLCJhdmF0YXJTdWJtaXRCdG4iLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVGb3JtIiwiZm9ybXMiLCJhdmF0YXJGb3JtIiwicG9zdEZvcm0iLCJuYW1lSW5wdXQiLCJpbWFnZVVybElucHV0IiwibG9nb0ltZyIsInBlbmNpbEljb25JbWciLCJwbHVzSWNvbkltZyIsInNlbGVjdGVkQ2FyZCIsInNlbGVjdGVkQ2FyZElkIiwiY3VycmVudFVzZXJJZCIsInNyYyIsImxvZ28iLCJwZW5jaWxJY29uIiwicGx1c0ljb24iLCJhcGkiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiRXJyb3IiLCJzdGF0dXMiLCJfcmVxdWVzdCIsImVuZHBvaW50Iiwib3B0aW9ucyIsImZldGNoIiwiaGFuZGxlRXJyb3IiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImVkaXRQcm9maWxlQXZhdGFyIiwiX3JlZjIiLCJhdmF0YXIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVkaXRVc2VySW5mbyIsIl9yZWYzIiwibmFtZSIsImFib3V0IiwiYWRkTmV3Q2FyZCIsIl9yZWY0IiwibGluayIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJ0b2dnbGVMaWtlIiwiaXNMaWtlZCIsImdldFVzZXJBbmRDYXJkcyIsImFsbCIsIl9yZWY1IiwidXNlckRhdGEiLCJjYXJkcyIsImVyciIsImF1dGhvcml6YXRpb24iLCJjcmVhdGVDYXJkRWxlbWVudCIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkSW1hZ2UiLCJjYXJkVGl0bGUiLCJjYXJkTGlrZWRCdG4iLCJkZWxldGVCdG4iLCJhbHQiLCJhZGRFdmVudExpc3RlbmVyIiwiaXNDdXJyZW50bHlMaWtlZCIsImNvbnRhaW5zIiwiX2lkIiwidXBkYXRlZENhcmQiLCJ0b2dnbGUiLCJvcGVuSW1hZ2VNb2RhbCIsImltYWdlVXJsIiwiaW1hZ2VDYXB0aW9uIiwib3BlblBvcHVwIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImVkaXRBdmF0YXJGb3JtU3VibWl0IiwiYXZhdGFyVXJsIiwidmFsdWUiLCJ0cmltIiwib3JpZ2luYWxUZXh0IiwibWFrZVJlcXVlc3QiLCJjbG9zZVBvcHVwIiwicG9wdXAiLCJoYW5kbGVFc2NLZXkiLCJoYW5kbGVDbGlja091dHNpZGVNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleSIsIm9wZW5lZE1vZGFsIiwiaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQiLCJkZXNjcmlwdGlvbiIsImhhbmRsZUNhcmRGb3JtU3VibWl0IiwiY2FyZERhdGEiLCJwcmVwZW5kIiwiY2FyZCIsImFwcGVuZENoaWxkIiwiYnRuIiwiY2xvc2VzdCIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=